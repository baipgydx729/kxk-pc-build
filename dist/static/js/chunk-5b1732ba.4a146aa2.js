(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b1732ba"],{6798:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"aux-card"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[t._v("库存商品")]),e("div",{staticClass:"dflex"},[e("AuxWarehouseSelect",{staticClass:"margin-left-sm",staticStyle:{width:"160px"},attrs:{multi:!1},on:{change:t.fetchDataList},model:{value:t.reqData.warehouseId,callback:function(a){t.$set(t.reqData,"warehouseId",a)},expression:"reqData.warehouseId"}}),e("el-input",{staticClass:"margin-left-sm",staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-search",clearable:"",placeholder:"请输入商品名称/编码搜索"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.fetchDataList(a)}},model:{value:t.reqData.keyword,callback:function(a){t.$set(t.reqData,"keyword",a)},expression:"reqData.keyword"}}),e("el-button",{staticClass:"margin-left-sm",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(a){return t.$common.toPage("./stock-orders-into")}}},[t._v("商品入库")])],1)]),e("div",{staticClass:"container-main"},[e("div",{staticClass:"left-box"},[e("div",{staticClass:"category"},[e("div",{staticClass:"title-box padding"},[t._v("商品分类")]),e("div",{staticClass:"list-box"},[e("div",{staticClass:"item padding-sm",class:{active:""==t.reqData.cid},on:{click:function(a){return t.changeCategory()}}},[e("span",[t._v("全部分类")])]),t._l(t.categoryList,(function(a){return e("div",{key:a._id,staticClass:"item padding-sm",class:{active:t.reqData.cid==a._id},on:{click:function(e){return t.changeCategory(a)}}},[e("span",[t._v(t._s(a.name))])])}))],2)])]),e("div",{staticClass:"right-box"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}],staticClass:"aux-table",attrs:{data:t.dataList,border:"",fit:"",stripe:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:""}}),e("el-table-column",{attrs:{align:"left",label:"商品名称","min-width":"220",fixed:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"dflex"},[e("el-avatar",{attrs:{shape:"square",size:40,fit:"cover",src:a.row.img||"/static/img/img-empty.png"}}),e("div",{staticClass:"padding-left"},[e("div",[t._v(t._s(a.row.name))]),a.row.code?e("div",{staticClass:"ft-grey fs-xs"},[t._v("No："+t._s(a.row.code))]):t._e()])],1)]}}])}),e("el-table-column",{attrs:{align:"left","min-width":"200",label:"规格/属性",prop:"spec"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.spec_list&&a.row.spec_list.length>0?e("div",{},t._l(a.row.spec_list,(function(a,i){return e("div",{key:i,staticClass:"padding-right-sm"},[t._v(t._s(a.name)+"："+t._s(a.values.join("/")))])})),0):e("div",[t._v(t._s(a.row.spec))])]}}])}),e("el-table-column",{attrs:{width:"90",align:"center",label:"单位"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.unit))])]}}])}),e("el-table-column",{attrs:{width:"100",align:"right",label:"实物库存"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.remain_count))])]}}])}),e("el-table-column",{attrs:{width:"100",align:"right",label:"锁定库存"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.holding_count))])]}}])}),e("el-table-column",{attrs:{width:"100",align:"right",label:"可用库存"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.stock_num))])]}}])}),e("el-table-column",{attrs:{width:"120",align:"right",label:"成本价(元)"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("cent2yuan")(a.row.cost_price)))])]}}])}),e("el-table-column",{attrs:{width:"120",align:"right",label:"库存总额(元)"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("cent2yuan")(a.row.cost_amount)))])]}}])}),e("el-table-column",{attrs:{width:"120",align:"right",label:"预计销售(元)"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("cent2yuan")(a.row.sales_amount)))])]}}])}),e("el-table-column",{attrs:{width:"120",align:"right",label:"预计利润(元)"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("cent2yuan")(a.row.profit_amount)))])]}}])}),e("el-table-column",{attrs:{width:"120",align:"right",label:"利润率"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.profit_rate+"%"))])]}}])})],1),e("div",{staticClass:"padding-sm dflex-c"},[e("el-pagination",{attrs:{background:"","page-size":t.pagination.pageSize,total:t.pagination.totalCount,"current-page":t.pagination.pageNo,"page-sizes":[10,15,20,30,50],layout:"total, prev, pager, next, sizes","hide-on-single-page":""},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1)],1)])])])},s=[],n=e("2197"),o=e("c3dd"),l={components:{AuxWarehouseSelect:o["a"]},filters:{formatStateText(t){return 2===t?"停用":"正常"}},data(){return{permission:"stock-query",showMoreFilter:!1,cateParentId:"",categoryList:[],dataLoading:!1,dataList:[],pagination:{totalCount:1,pageSize:10,pageNo:1},reqData:{cid:"",keyword:"",warehouseId:""}}},mounted(){this.fetchCategory(),this.fetchDataList()},methods:{fetchCategory(){Object(n["a"])("goods/listGoodsCategory",{parentId:this.cateParentId},{functionName:"xunda"}).then(t=>{this.categoryList=t.data||[]})},fetchDataList(){this.dataLoading=!0;const t=Object.assign({},this.getReqData(),this.pagination);Object(n["a"])("stock/listGoods",t,{functionName:"xunda"}).then(t=>{this.dataList=t.data||[],1==this.pagination.pageNo&&(this.pagination.totalCount=t.totalCount),this.dataLoading=!1})},getReqData(){const t=Object.assign({},this.reqData);return t},handleSearch(t){this.fetchDataList()},changePageNo(t){this.pagination.pageNo=t,this.fetchDataList()},changePageSize(t){this.pagination.pageNo=1,this.pagination.pageSize=t,this.fetchDataList()},changeCategory(t){this.reqData.cid=t?t._id:"",this.pagination.pageNo=1,this.fetchDataList()}}},r=l,c=(e("84f4"),e("2877")),d=Object(c["a"])(r,i,s,!1,null,null,null);a["default"]=d.exports},"84f4":function(t,a,e){"use strict";e("dfbd")},dfbd:function(t,a,e){}}]);