(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a038e3f2"],{3562:function(a,t,e){"use strict";e.r(t);var l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"min-container"},[e("el-form",{ref:"elForm",attrs:{model:a.formData,rules:a.rules,"label-width":"110px"}},[e("div",{staticClass:"aux-card"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("基础信息")])]),e("div",{staticClass:"right"},[e("el-button",{on:{click:a.resetForm}},[a._v("重置")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-save"},on:{click:a.submitForm}},[a._v("保存信息")])],1)]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"客户名称",prop:"name"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写客户名称",maxlength:"64",clearable:""},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"客户编码",prop:"code"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写客户编码",clearable:""},model:{value:a.formData.code,callback:function(t){a.$set(a.formData,"code",t)},expression:"formData.code"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"所属区域",prop:"area"}},[e("AuxAreaPicker",{on:{change:a.changePickerArea},model:{value:a.formData.area_ids,callback:function(t){a.$set(a.formData,"area_ids",t)},expression:"formData.area_ids"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"关联业务员",prop:"sale_manid"}},[e("AuxMemberSelect",{attrs:{placeholder:"默认关联业务员"},model:{value:a.formData.sale_mid,callback:function(t){a.$set(a.formData,"sale_mid",t)},expression:"formData.sale_mid"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"启用状态",prop:"state"}},[e("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择启用状态",clearable:""},model:{value:a.formData.state,callback:function(t){a.$set(a.formData,"state",t)},expression:"formData.state"}},[e("el-option",{attrs:{label:"启用",value:1}}),e("el-option",{attrs:{label:"停用",value:2}})],1)],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"备注信息",prop:"remark"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写备注信息",maxlength:"100",clearable:""},model:{value:a.formData.remark,callback:function(t){a.$set(a.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)]),e("div",{staticClass:"aux-card margin-top"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("售价信息")])])]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"售价等级",prop:"sale_grade"}},[e("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择售价等级",clearable:""},model:{value:a.formData.sale_grade,callback:function(t){a.$set(a.formData,"sale_grade",t)},expression:"formData.sale_grade"}},a._l(a.saleGradeList,(function(a,t){return e("el-option",{key:t,attrs:{label:a.name,value:a.value}})})),1)],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"信用额度",prop:"max_debt_amount"}},[e("el-input",{style:{width:"100%"},attrs:{oninput:"value=value.match(/^\\d+(?:\\.\\d{0,2})?/)",placeholder:"请填写信用额度",clearable:""},model:{value:a.formData.max_debt_amount,callback:function(t){a.$set(a.formData,"max_debt_amount",a._n(t))},expression:"formData.max_debt_amount"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}})],1)]),e("div",{staticClass:"aux-card margin-top"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("联系信息")])])]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"联系人",prop:"contact"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写联系人",maxlength:"16",clearable:""},model:{value:a.formData.contact,callback:function(t){a.$set(a.formData,"contact",t)},expression:"formData.contact"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"联系电话",prop:"telephone"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写联系电话",maxlength:"16",clearable:""},model:{value:a.formData.telephone,callback:function(t){a.$set(a.formData,"telephone",t)},expression:"formData.telephone"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"详细地址",prop:"address"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写详细地址",maxlength:"128",clearable:""},model:{value:a.formData.address,callback:function(t){a.$set(a.formData,"address",t)},expression:"formData.address"}})],1)],1),e("el-divider",{attrs:{"content-position":"center"}},[e("span",{on:{click:function(t){a.moreSet=!0}}},[a._v("更多设置")])]),a.moreSet?e("div",[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"QQ号",prop:"qq"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写QQ号",maxlength:"12",clearable:""},model:{value:a.formData.qq,callback:function(t){a.$set(a.formData,"qq",t)},expression:"formData.qq"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"微信号",prop:"weixin"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写微信号",maxlength:"32",clearable:""},model:{value:a.formData.weixin,callback:function(t){a.$set(a.formData,"weixin",t)},expression:"formData.weixin"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"邮箱",prop:"email"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写邮箱",maxlength:"32",clearable:""},model:{value:a.formData.email,callback:function(t){a.$set(a.formData,"email",t)},expression:"formData.email"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"邮编",prop:" postal"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写邮编",maxlength:"8",clearable:""},model:{value:a.formData.postal,callback:function(t){a.$set(a.formData,"postal",t)},expression:"formData.postal"}})],1)],1)],1):a._e()],1)])])],1)},s=[],r=e("2197"),o=e("f63d"),i=e("b866"),n={name:"StoreCreate",components:{AuxAreaPicker:o["a"],AuxMemberSelect:i["a"]},data(){return{moreSet:!1,storeId:"",saleGradeList:this.$constant.SALE_GRADE_LIST,formData:{name:"",code:"",area_id:"",area_ids:[],area_name:[],sale_mid:"",state:1,remark:"",sale_grade:0,max_debt_amount:"",contact:"",telephone:"",address:"",location:"",qq:"",weixin:"",email:"",postal:""},rules:{name:[{required:!0,message:"请填写客户名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],code:[],area:[],sale_mid:[],state:[],remark:[],contact:[{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"}]}}},watch:{},created(){const{id:a}=this.$route.query;a&&(this.storeId=a,this.fetchStoreInfo())},mounted(){},methods:{fetchStoreInfo(){Object(r["a"])("store/getStore",{storeId:this.storeId},{functionName:"xunda"}).then(a=>{const{max_debt_amount:t,area_name:e,area_ids:l=[],area_names:s=[]}=a.data;console.log(l),this.formData=Object.assign(this.formData,a.data),this.formData.area_name=e||s.join(" / "),t&&(this.formData.max_debt_amount=(t/100).toFixed(2))})},changePickerArea(a){this.formData.area_name=a.map(a=>a.name).join(" / "),this.formData.area_id=this.formData.area_ids[this.formData.area_ids.length-1]},submitForm(){this.$refs["elForm"].validate(a=>{a&&Object(r["a"])("store/saveStore",this.getPostData(),{functionName:"xunda"}).then(a=>{this.$message.success("保存成功"),setTimeout(()=>{this.$common.closePage()},300)})})},getPostData(){const a=this.formData;return Object.assign({},a,{max_debt_amount:this.$common.yuan2cent(a.max_debt_amount),location:""})},resetForm(){this.$refs["elForm"].resetFields()}}},m=n,c=(e("dca0"),e("2877")),d=Object(c["a"])(m,l,s,!1,null,"0493dc22",null);t["default"]=d.exports},"4e92":function(a,t,e){},dca0:function(a,t,e){"use strict";e("4e92")}}]);