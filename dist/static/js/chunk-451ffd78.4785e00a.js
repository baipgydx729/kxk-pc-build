(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-451ffd78"],{"6ba5":function(t,e,a){},"7a72":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"aux-card"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v("商品列表")]),a("div",{staticClass:"dflex"},[a("el-input",{staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-search",clearable:"",placeholder:"请输入商品名称/编码, 按回车键搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchDataList(e)}},model:{value:t.reqData.keyword,callback:function(e){t.$set(t.reqData,"keyword",e)},expression:"reqData.keyword"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-edit"],expression:"['goods-edit']"}],staticClass:"margin-left-sm",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.$common.toPage("./goods-create")}}},[t._v("添加商品")])],1)]),a("div",{staticClass:"container-main"},[a("div",{staticClass:"left-box"},[a("div",{staticClass:"category"},[a("div",{staticClass:"title-box dflex-b"},[a("div",{staticClass:"padding"},[t._v("商品分类")]),a("div",{directives:[{name:"permission",rawName:"v-permission",value:["goods-category-edit"],expression:"['goods-category-edit']"}],staticClass:"padding-right-sm"},[a("el-tooltip",{attrs:{content:"添加分类",placement:"top",effect:"dark"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",circle:"",plain:""},on:{click:function(e){return t.$common.toPage("./goods-category")}}})],1)],1)]),a("div",{staticClass:"list-box"},[a("div",{staticClass:"item padding-sm",class:{active:""==t.reqData.cid},on:{click:function(e){return t.changeCategory()}}},[a("span",{staticClass:"fs-sml"},[t._v("全部分类")])]),t._l(t.categoryList,(function(e,i){return a("div",{key:e._id,staticClass:"item padding-sm",class:{active:t.reqData.cid==e._id},on:{click:function(a){return t.changeCategory(e)}}},[a("span",{staticClass:"fs-sml"},[t._v(t._s(e.name))])])}))],2)])]),a("div",{staticClass:"right-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}],staticClass:"aux-table",attrs:{data:t.dataList,border:"",fit:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",label:"商品名称","min-width":"220",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"dflex"},[a("el-avatar",{attrs:{src:e.row.img||"/static/img/img-empty.png",shape:"square",size:40,fit:"cover"}}),a("div",{staticClass:"padding-left-sm"},[a("div",[t._v(t._s(e.row.name))]),e.row.code?a("div",{staticClass:"ft-grey fs-xs"},[t._v("No."+t._s(e.row.code))]):t._e()])],1)]}}])}),a("el-table-column",{attrs:{align:"left","min-width":"200",label:"规格/属性",prop:"spec"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spec_list&&e.row.spec_list.length>0?a("div",{},t._l(e.row.spec_list,(function(e,i){return a("div",{key:i,staticClass:"padding-right-sm"},[t._v(t._s(e.name)+"："+t._s(e.values.join("/")))])})),0):a("div",[t._v(t._s(e.row.spec))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品单位",prop:"unit"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.unit_desc?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.unit_desc,placement:"top"}},[a("span",[t._v(t._s(e.row.unit))])]):a("span",[t._v(t._s(e.row.unit))])]}}])}),a("el-table-column",{attrs:{width:"110",align:"right",label:"批发价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("cent2yuan")(e.row.price)))]}}])}),a("el-table-column",{attrs:{width:"110",align:"right",label:"零售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("cent2yuan")(e.row.market_price)))]}}])}),a("el-table-column",{attrs:{width:"110",align:"right",label:"最低售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("cent2yuan")(e.row.min_price)))]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatStateText")(e.row.state)))]}}])}),a("el-table-column",{attrs:{width:"140",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-edit"],expression:"['goods-edit']"}],attrs:{type:"text"},on:{click:function(a){t.$common.toPage("./goods-create?type=edit&id="+e.row._id+"&t="+Date.now())}}},[t._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-delete"],expression:"['goods-delete']"}],attrs:{type:"text"},on:{click:function(a){return t.deleteGoods(e.row,e.$index)}}},[t._v("删除")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-edit"],expression:"['goods-edit']"}],attrs:{type:"text"},on:{click:function(a){t.$common.toPage("./goods-create?type=copyAdd&id="+e.row._id+"&t="+Date.now())}}},[t._v("复制")])]}}])})],1),a("div",{staticClass:"padding-sm dflex-c"},[a("el-pagination",{attrs:{background:"","page-size":t.pagination.pageSize,total:t.pagination.totalCount,"current-page":t.pagination.pageNo,"page-sizes":[10,15,20,30,50],layout:"total, prev, pager, next, sizes","hide-on-single-page":""},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1)],1)])])])},s=[],n=a("2197"),o=a("c031"),r={name:"GoodsList",filters:{formatStateText(t){return 2==t?"停用":"正常"}},data(){return{permission:"goods-query",showMoreFilter:!1,cateParentId:"",categoryList:[],dataLoading:!1,dataList:[],pagination:{totalCount:1,pageSize:10,pageNo:1},reqData:{cid:"",keyword:"",storeId:"",goodsId:"",userIds:[],warehouseIds:[],areaIds:[],state:[],settleState:[]}}},mounted(){this.fetchCategory(),this.fetchDataList()},methods:{fetchCategory(){Object(n["a"])("goods/listGoodsCategory",{parentId:this.cateParentId},{functionName:"xunda"}).then(t=>{this.categoryList=t.data||[]})},fetchDataList(){this.dataLoading=!0;const t=Object.assign({},this.getReqData(),this.pagination);Object(n["a"])("goods/list",t,{functionName:"xunda"}).then(t=>{this.dataList=t.data||[],Object(o["f"])(t.data||[]),1==this.pagination.pageNo&&(this.pagination.totalCount=t.totalCount),this.dataLoading=!1})},getReqData(){const t=Object.assign({},this.reqData);return t},handleSearch(t){this.fetchDataList()},changePageNo(t){this.pagination.pageNo=t,this.fetchDataList()},changePageSize(t){this.pagination.pageNo=1,this.pagination.pageSize=t,this.fetchDataList()},changeCategory(t){this.reqData.cid=t?t._id:"",this.pagination.pageNo=1,this.fetchDataList()},deleteGoods(t,e){this.$confirm("确定要删除该商品嘛？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(n["a"])("goods/deleteGoods",{goods_id:t._id},{functionName:"xunda"}).then(t=>{this.fetchDataList(),this.$message({type:"success",message:"删除成功!"})})})}}},c=r,l=(a("acfd"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,null,null);e["default"]=d.exports},acfd:function(t,e,a){"use strict";a("6ba5")}}]);