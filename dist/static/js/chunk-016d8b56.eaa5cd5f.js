(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-016d8b56"],{1202:function(e,t,i){},"22c5":function(e,t,i){"use strict";i("ce4d")},3235:function(e,t,i){},"37a8":function(e,t,i){"use strict";i.r(t),i.d(t,"templateData",(function(){return n}));const n={panels:[{index:0,name:1,height:210,width:297,paperHeader:40,paperFooter:560,printElements:[{options:{left:260,top:10,height:27,width:300,title:"标题",field:"company.name",fontSize:19,fontWeight:"600",textAlign:"center",lineHeight:26,coordinateSync:!0,widthHeightSync:!0,hideTitle:!0,fixed:!0,qrCodeLevel:0},printElementType:{title:"自定义",type:"text"}},{options:{left:745.5,top:13.5,height:13,width:73.5,title:"(单据类型)",textAlign:"right",right:786.75,bottom:27.25,vCenter:750,hCenter:20.75,coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,formatter:'$utils.textFormatter("ordersType")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:48,height:13,width:139.5,title:"客户",textAlign:"left",right:68.74609375,bottom:73.24609375,vCenter:42.74609375,hCenter:66.74609375,field:"bizInfo.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:162,top:48,height:13,width:150,title:"联系人",textAlign:"left",right:334.5,bottom:62.5,vCenter:277.5,hCenter:56,field:"bizInfo.contact",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.joinFormatter(" - ","bizInfo.contact","bizInfo.telephone")'},printElementType:{title:"自定义",type:"text"}},{options:{left:320,top:48,height:13,width:240,title:"地址",textAlign:"left",right:516,bottom:60.25,vCenter:440.25,hCenter:53.75,field:"bizInfo.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:560,top:48,height:13,width:154.5,title:"单号",textAlign:"right",right:689.25,bottom:61,vCenter:612,hCenter:54.5,field:"ordersDetail.orders_no",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:702,top:48,height:13,width:118.5,title:"日期",textAlign:"right",right:819.75,bottom:67.75,vCenter:760.5,hCenter:61.25,field:"ordersDetail.orders_date",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.textFormatter("date","YYYY-MM-DD")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:65,height:120,width:801,field:"ordersDetail.orders_goods",coordinateSync:!1,widthHeightSync:!1,right:565,bottom:96,vCenter:290,hCenter:69,tableHeaderRowHeight:26,tableBodyRowHeight:26,rowsColumnsMergeClean:!0,tableHeaderRepeat:"first",footerFormatter:"$utils.tableFooterFormatter()",tableFooterRepeat:"last",columns:[[{width:43,title:"序号",field:"searno",checked:!0,columnId:"searno",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"sequence",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:167,title:"商品名称",field:"goods_name",checked:!0,columnId:"goods_name",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:115,title:"商品编号",field:"goods_no",checked:!0,columnId:"goods_no",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:95,title:"规格型号",field:"goods_spec",checked:!0,columnId:"goods_spec",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:63,title:"单位",field:"goods_unit",checked:!0,columnId:"goods_unit",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79,title:"数量",field:"goods_cnt",checked:!0,columnId:"goods_cnt",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79,title:"原价",field:"goods_ori_price",checked:!0,columnId:"goods_ori_price",fixed:!1,rowspan:1,colspan:1,align:"center",formatter2:'$utils.tableColumnFormatter("formatPrice", "goods_price")',tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79.23561151079136,title:"折扣",field:"goods_rate",checked:!0,columnId:"goods_rate",fixed:!1,rowspan:1,colspan:1,align:"center",formatter2:'$utils.tableColumnFormatter("formatPrice", 100)',tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79,title:"单价",field:"goods_price",checked:!0,columnId:"goods_price",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79,title:"小计",field:"total_money",checked:!0,columnId:"total_money",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:79,title:"备注",field:"remark",checked:!0,columnId:"remark",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""}]]},printElementType:{title:"订单数据",type:"table",editable:!0,columnDisplayEditable:!0,columnDisplayIndexEditable:!0,columnTitleEditable:!0,columnResizable:!0,columnAlignEditable:!0,isEnableEditField:!0,isEnableContextMenu:!0,isEnableInsertRow:!0,isEnableDeleteRow:!0,isEnableInsertColumn:!0,isEnableDeleteColumn:!0,isEnableMergeCell:!0}},{options:{left:373.5,top:192,height:13,width:166.5,title:"其他费用",textAlign:"left",right:537.24609375,bottom:135.49609375,vCenter:453.99609375,hCenter:128.99609375,field:"ordersDetail.orders_extend_fee",coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0},printElementType:{title:"自定义",type:"text"}},{options:{left:549,top:192,height:13,width:150,title:"合计金额",textAlign:"left",right:715.74609375,bottom:136.24609375,vCenter:632.49609375,hCenter:129.74609375,field:"ordersDetail.orders_total_money",coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0},printElementType:{title:"自定义",type:"text"}},{options:{left:202.5,top:193.5,height:13,width:166.5,title:"整单优惠",textAlign:"left",right:369.24609375,bottom:136.24609375,vCenter:285.99609375,hCenter:129.74609375,field:"ordersDetail.orders_discount_money",coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0},printElementType:{title:"自定义",type:"text"}},{options:{left:19.5,top:193.5,height:13,width:166.5,title:"原价金额",textAlign:"left",right:186.24609375,bottom:138.49609375,vCenter:102.99609375,hCenter:131.99609375,field:"ordersDetail.goods_original_money",coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,testData:""},printElementType:{title:"自定义",type:"text"}},{options:{left:229.5,top:210,height:13,width:94.5,title:"制单人",textAlign:"left",right:287.25,bottom:151.498046875,vCenter:240,hCenter:144.998046875,field:"ordersDetail.create_uname",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:373.5,top:210,height:13,width:166.5,title:"发货人(盖章/签字）",textAlign:"left",right:501.75,bottom:158.998046875,vCenter:437.25,hCenter:152.498046875,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:19.5,top:210,height:13,width:195,title:"单位",textAlign:"left",right:187.5,bottom:155.5,vCenter:104.25,hCenter:149,field:"company.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:549,top:210,height:13,width:150,title:"收货人(盖章/签字）",textAlign:"left",right:665.25,bottom:141.25,vCenter:600.75,hCenter:134.75,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:19.5,top:226.5,height:13,width:553.5,title:"地址",textAlign:"left",right:570.75,bottom:172,vCenter:294,hCenter:165.5,field:"company.address",coordinateSync:!1,widthHeightSync:!1,testData:""},printElementType:{title:"自定义",type:"text"}}],paperNumberLeft:800,paperNumberTop:566,paperNumberContinue:!0,watermarkOptions:{},panelLayoutOptions:{}}]};t["default"]={name:"a4xl",type:"sales",data:n}},"3f89":function(e,t,i){"use strict";var n=i("2f62");t["a"]=new n["a"].Store({state:{controlsValue:{showTitle:!0,title:"",showSubTitle:!1,subTitle:"(销售单)",showRemark:!0,showExplain:!0,explainText:"注意：送货单中所列货物之数量、质量及单价请及时核验，确认无误后签收，感谢您的支持与配合。",expandText:""}},mutations:{load(e,t){const i=localStorage.getItem("app-print-xsd-"+t);i&&(e.controlsValue=Object.assign(e.controlsValue,JSON.parse(i)))},save(e,t){localStorage.setItem("app-print-xsd-"+t,JSON.stringify(e.controlsValue))}},getters:{}})},4638:function(e,t,i){"use strict";i("ee5e")},"4d09":function(e,t,i){},5066:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"goodsTable",staticClass:"aux-table no-border",attrs:{data:e.goodsList,border:"",fit:"","show-summary":"","summary-method":e.summaryMethod}},[i("el-table-column",{attrs:{type:"index",width:"60",align:"center",label:"序号"}}),i("el-table-column",{attrs:{width:"300",align:"left",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"dflex"},[t.row.goods_img?i("div",{staticClass:"goods-img"},[i("img",{attrs:{src:t.row.goods_img,mode:"widthFix"}})]):e._e(),i("div",[i("div",[e._v(e._s(t.row.goods_name))]),t.row.goods_no?i("div",{staticClass:"fs-xs ft-grey"},[e._v("No："+e._s(t.row.goods_no))]):e._e()])])]}}])}),i("el-table-column",{attrs:{width:"160",align:"center",label:"规格/属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_spec))]}}])}),i("el-table-column",{attrs:{width:"120",align:"center",label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_unit))]}}])}),i("el-table-column",{attrs:{width:"120",align:"center",label:"数量",prop:"goods_cnt"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(t.row.goods_cnt))]),t.row.refund_cnt>0?i("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("退货 -"+e._s(t.row.refund_cnt))]):e._e()]}}])}),i("el-table-column",{attrs:{width:"140",align:"right",label:"原价(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_ori_price))]}}])}),i("el-table-column",{attrs:{width:"140",align:"right",label:"折扣(%)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_rate))]}}])}),i("el-table-column",{attrs:{width:"140",align:"right",label:"单价(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_price))]}}])}),i("el-table-column",{attrs:{width:"140",align:"right",label:"金额小计(元)",prop:"total_money"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.total_money))]}}])}),i("el-table-column",{attrs:{align:"left",label:"备注","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark))]}}])})],1)},o=[],a=(i("13d5"),{props:{data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{goodsList:[],goodsTotalCount:0,goodsOriginalMoney:0,goodsDiscountMoney:0,goodsTotalMoney:0}},watch:{data:{handler(e,t){this.initData(e)},immediate:!0}},methods:{initData(e){this.goodsList=e.map(e=>this.formatItemGoods(e))},formatItemGoods(e={},t={}){return e},summaryMethod({columns:e,data:t}){const i=[];return e.forEach((e,n)=>{if(0===n)return void(i[n]="合计");if(!["goods_cnt","total_money"].includes(e.property))return void(i[n]=" ");const o=t.map(t=>Number(t[e.property]));o.every(e=>isNaN(e))?i[n]="":(i[n]=o.reduce((e,t)=>e+t,0),["total_money"].includes(e.property)&&(i[n]=i[n].toFixed(2)))}),i}}}),l=a,r=(i("9b47"),i("2877")),s=Object(r["a"])(l,n,o,!1,null,null,null);t["a"]=s.exports},"53dd":function(e,t,i){"use strict";i("4d09")},"59a9":function(e,t,i){"use strict";i("3235")},"5e91":function(e,t,i){"use strict";i.r(t);const n={panels:[{index:0,name:1,height:130,width:190,paperHeader:40,paperFooter:330,printElements:[{options:{left:130,top:10,height:27,width:300,title:"标题",field:"company.name",fontSize:16,fontWeight:"600",textAlign:"center",lineHeight:26,coordinateSync:!0,widthHeightSync:!0,hideTitle:!0},printElementType:{title:"自定义",type:"text"}},{options:{left:450,top:15,height:13,width:73.5,title:"(单据类型)",textAlign:"right",right:577.5,bottom:23.5,vCenter:540.75,hCenter:17,coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,formatter:'$utils.textFormatter("ordersType")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:42,height:13,width:200,title:"客户",textAlign:"left",right:68.74609375,bottom:73.24609375,vCenter:42.74609375,hCenter:66.74609375,field:"bizInfo.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:56,height:13,width:200,title:"地址",textAlign:"left",right:181.5,bottom:76,vCenter:99,hCenter:69.5,field:"bizInfo.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:230,top:42,height:13,width:114,title:"联系人",textAlign:"left",right:342,bottom:77.5,vCenter:285,hCenter:71,field:"bizInfo.contact",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:230,top:56,height:13,width:114,title:"电话",textAlign:"left",right:343.5,bottom:91.75,vCenter:286.5,hCenter:85.25,field:"bizInfo.telephone",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:336,top:42,height:13,width:184.5,title:"单号",textAlign:"right",right:500,bottom:76,vCenter:482.25,hCenter:69.5,field:"ordersDetail.orders_no",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:336,top:56,height:13,width:183,title:"日期",textAlign:"right",right:500,bottom:91,vCenter:483,hCenter:84.5,field:"ordersDetail.orders_date",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.textFormatter("date")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:70,height:120,width:500,field:"ordersDetail.orders_goods",coordinateSync:!1,widthHeightSync:!1,right:500,bottom:96,vCenter:290,hCenter:69,tableHeaderRowHeight:26,tableBodyRowHeight:26,rowsColumnsMergeClean:!0,tableHeaderRepeat:"first",footerFormatter:"$utils.tableFooterFormatter()",tableFooterRepeat:"last",columns:[[{width:30,title:"序号",field:"searno",checked:!0,columnId:"searno",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"sequence",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:116,title:"商品名称",field:"goods_name",checked:!0,columnId:"goods_name",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"规格型号",field:"goods_spec",checked:!0,columnId:"goods_spec",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:30,title:"单位",field:"goods_unit",checked:!0,columnId:"goods_unit",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"数量",field:"goods_cnt",checked:!0,columnId:"goods_cnt",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"单价",field:"goods_price",checked:!0,columnId:"goods_price",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"小计",field:"total_money",checked:!0,columnId:"total_money",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"备注",field:"remark",checked:!0,columnId:"remark",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""}]]},printElementType:{title:"订单数据",type:"table",editable:!0,columnDisplayEditable:!0,columnDisplayIndexEditable:!0,columnTitleEditable:!0,columnResizable:!0,columnAlignEditable:!0,isEnableEditField:!0,isEnableContextMenu:!0,isEnableInsertRow:!0,isEnableDeleteRow:!0,isEnableInsertColumn:!0,isEnableDeleteColumn:!0,isEnableMergeCell:!0}},{options:{left:20,top:194,height:13,width:166.5,title:"单位",textAlign:"left",right:181,bottom:234,vCenter:98,hCenter:227,field:"company.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:208,height:13,width:553.5,title:"地址",textAlign:"left",right:570,bottom:254.5,vCenter:293.25,hCenter:248,field:"company.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:192,top:194,height:13,width:94.5,title:"制单人",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,field:"ordersDetail.create_uname",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:280,top:194,height:13,width:129,title:"发货人(盖章/签字）",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:400,top:194,height:13,width:129,title:"收货人(盖章/签字）",textAlign:"left",right:568.5,bottom:233.5,vCenter:504,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}}],orient:2,paperNumberLeft:500,paperNumberTop:340,paperNumberContinue:!0,watermarkOptions:{},panelLayoutOptions:{}}]};t["default"]={name:"d190-130mm",type:"sales",data:n}},"691c":function(e,t,i){"use strict";i.r(t);const n={panels:[{index:0,name:1,height:140,width:210,paperHeader:40,paperFooter:360,printElements:[{options:{left:150,top:10,height:27,width:300,title:"标题",field:"company.name",fontSize:19,fontWeight:"600",textAlign:"center",lineHeight:26,coordinateSync:!0,widthHeightSync:!0,hideTitle:!0},printElementType:{title:"自定义",type:"text"}},{options:{left:501,top:15,height:13,width:73.5,title:"(单据类型)",textAlign:"right",right:577.5,bottom:23.5,vCenter:540.75,hCenter:17,coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,formatter:'$utils.textFormatter("ordersType")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:48,height:13,width:200,title:"客户",textAlign:"left",right:68.74609375,bottom:73.24609375,vCenter:42.74609375,hCenter:66.74609375,field:"bizInfo.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:61,height:13,width:200,title:"地址",textAlign:"left",right:181.5,bottom:76,vCenter:99,hCenter:69.5,field:"bizInfo.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:48,height:13,width:114,title:"联系人",textAlign:"left",right:342,bottom:77.5,vCenter:285,hCenter:71,field:"bizInfo.contact",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:61,height:13,width:114,title:"电话",textAlign:"left",right:343.5,bottom:91.75,vCenter:286.5,hCenter:85.25,field:"bizInfo.telephone",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:48,height:13,width:184.5,title:"单号",textAlign:"right",right:574.5,bottom:76,vCenter:482.25,hCenter:69.5,field:"ordersDetail.orders_no",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:61,height:13,width:183,title:"日期",textAlign:"right",right:574.5,bottom:91,vCenter:483,hCenter:84.5,field:"ordersDetail.orders_date",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.textFormatter("date")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:76,height:120,width:555,field:"ordersDetail.orders_goods",coordinateSync:!1,widthHeightSync:!1,right:565,bottom:96,vCenter:290,hCenter:69,tableHeaderRowHeight:26,tableBodyRowHeight:26,rowsColumnsMergeClean:!0,tableHeaderRepeat:"first",footerFormatter:"$utils.tableFooterFormatter()",tableFooterRepeat:"last",columns:[[{width:30,title:"序号",field:"searno",checked:!0,columnId:"searno",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"sequence",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:116,title:"商品名称",field:"goods_name",checked:!0,columnId:"goods_name",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"商品编号",field:"goods_no",checked:!0,columnId:"goods_no",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"规格型号",field:"goods_spec",checked:!0,columnId:"goods_spec",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:30,title:"单位",field:"goods_unit",checked:!0,columnId:"goods_unit",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"数量",field:"goods_cnt",checked:!0,columnId:"goods_cnt",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"单价",field:"goods_price",checked:!0,columnId:"goods_price",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"小计",field:"total_money",checked:!0,columnId:"total_money",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"备注",field:"remark",checked:!0,columnId:"remark",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""}]]},printElementType:{title:"订单数据",type:"table",editable:!0,columnDisplayEditable:!0,columnDisplayIndexEditable:!0,columnTitleEditable:!0,columnResizable:!0,columnAlignEditable:!0,isEnableEditField:!0,isEnableContextMenu:!0,isEnableInsertRow:!0,isEnableDeleteRow:!0,isEnableInsertColumn:!0,isEnableDeleteColumn:!0,isEnableMergeCell:!0}},{options:{left:20,top:200,height:13,width:166.5,title:"单位",textAlign:"left",right:181,bottom:234,vCenter:98,hCenter:227,field:"company.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:213,height:13,width:553.5,title:"地址",textAlign:"left",right:570,bottom:254.5,vCenter:293.25,hCenter:248,field:"company.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:192,top:200,height:13,width:94.5,title:"制单人",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,field:"ordersDetail.create_uname",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:300,top:200,height:13,width:129,title:"发货人(盖章/签字）",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:440,top:200,height:13,width:129,title:"收货人(盖章/签字）",textAlign:"left",right:568.5,bottom:233.5,vCenter:504,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}}],orient:2,paperNumberLeft:560,paperNumberTop:370,paperNumberContinue:!0,watermarkOptions:{},panelLayoutOptions:{}}]};t["default"]={name:"d241-140mm",type:"sales",data:n}},"8fb8":function(e,t,i){},"988c":function(e,t,i){"use strict";i.r(t);const n={panels:[{index:0,name:1,height:297,width:210,paperHeader:40,paperFooter:800,printElements:[{options:{left:150,top:10,height:27,width:300,title:"标题",field:"company.name",fontSize:19,fontWeight:"600",textAlign:"center",lineHeight:26,coordinateSync:!0,widthHeightSync:!0,hideTitle:!0},printElementType:{title:"自定义",type:"text"}},{options:{left:501,top:15,height:13,width:73.5,title:"(单据类型)",textAlign:"right",right:577.5,bottom:23.5,vCenter:540.75,hCenter:17,coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,formatter:'$utils.textFormatter("ordersType")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:48,height:13,width:200,title:"客户",textAlign:"left",right:68.74609375,bottom:73.24609375,vCenter:42.74609375,hCenter:66.74609375,field:"bizInfo.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:61,height:13,width:200,title:"地址",textAlign:"left",right:181.5,bottom:76,vCenter:99,hCenter:69.5,field:"bizInfo.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:48,height:13,width:114,title:"联系人",textAlign:"left",right:342,bottom:77.5,vCenter:285,hCenter:71,field:"bizInfo.contact",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:61,height:13,width:114,title:"电话",textAlign:"left",right:343.5,bottom:91.75,vCenter:286.5,hCenter:85.25,field:"bizInfo.telephone",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:48,height:13,width:184.5,title:"单号",textAlign:"right",right:574.5,bottom:76,vCenter:482.25,hCenter:69.5,field:"ordersDetail.orders_no",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:61,height:13,width:183,title:"日期",textAlign:"right",right:574.5,bottom:91,vCenter:483,hCenter:84.5,field:"ordersDetail.orders_date",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.textFormatter("date")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:76,height:120,width:555,field:"ordersDetail.orders_goods",coordinateSync:!1,widthHeightSync:!1,right:560,bottom:96,vCenter:290,hCenter:69,tableHeaderRowHeight:26,tableBodyRowHeight:26,rowsColumnsMergeClean:!0,tableHeaderRepeat:"first",footerFormatter:"$utils.tableFooterFormatter()",tableFooterRepeat:"last",columns:[[{width:30,title:"序号",field:"searno",checked:!0,columnId:"searno",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"sequence",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:116,title:"商品名称",field:"goods_name",checked:!0,columnId:"goods_name",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"商品编号",field:"goods_no",checked:!0,columnId:"goods_no",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"规格型号",field:"goods_spec",checked:!0,columnId:"goods_spec",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:30,title:"单位",field:"goods_unit",checked:!0,columnId:"goods_unit",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"数量",field:"goods_cnt",checked:!0,columnId:"goods_cnt",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"单价",field:"goods_price",checked:!0,columnId:"goods_price",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"小计",field:"total_money",checked:!0,columnId:"total_money",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"备注",field:"remark",checked:!0,columnId:"remark",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""}]]},printElementType:{title:"订单数据",type:"table",editable:!0,columnDisplayEditable:!0,columnDisplayIndexEditable:!0,columnTitleEditable:!0,columnResizable:!0,columnAlignEditable:!0,isEnableEditField:!0,isEnableContextMenu:!0,isEnableInsertRow:!0,isEnableDeleteRow:!0,isEnableInsertColumn:!0,isEnableDeleteColumn:!0,isEnableMergeCell:!0}},{options:{left:20,top:200,height:13,width:166.5,title:"单位",textAlign:"left",right:181,bottom:234,vCenter:98,hCenter:227,field:"company.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:213,height:13,width:553.5,title:"地址",textAlign:"left",right:570,bottom:254.5,vCenter:293.25,hCenter:248,field:"company.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:192,top:200,height:13,width:94.5,title:"制单人",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,field:"ordersDetail.create_uname",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:300,top:200,height:13,width:129,title:"发货人(盖章/签字）",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:440,top:200,height:13,width:129,title:"收货人(盖章/签字）",textAlign:"left",right:568.5,bottom:233.5,vCenter:504,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}}],paperNumberLeft:565.5,paperNumberTop:819,paperNumberContinue:!0,watermarkOptions:{},panelLayoutOptions:{}}]};t["default"]={name:"a4",type:"sales",data:n}},"9b47":function(e,t,i){"use strict";i("c87d")},c87d:function(e,t,i){},ce4d:function(e,t,i){},d521:function(e,t,i){var n={"./a4.js":"988c","./a4xl.js":"37a8","./d190x130mm.js":"5e91","./d241x140mm.js":"691c","./d241x93mm.js":"e3f7"};function o(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="d521"},e3f7:function(e,t,i){"use strict";i.r(t);const n={panels:[{index:0,name:1,height:93,width:210,paperHeader:36,paperFooter:221.7,printElements:[{options:{left:150,top:10,height:27,width:300,title:"标题",field:"company.name",fontSize:16,fontWeight:"600",textAlign:"center",lineHeight:26,coordinateSync:!0,widthHeightSync:!0,hideTitle:!0},printElementType:{title:"自定义",type:"text"}},{options:{left:501,top:15,height:13,width:73.5,title:"(单据类型)",textAlign:"right",right:577.5,bottom:23.5,vCenter:540.75,hCenter:17,coordinateSync:!1,widthHeightSync:!1,qrCodeLevel:0,formatter:'$utils.textFormatter("ordersType")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:36,height:13,width:200,title:"客户",textAlign:"left",right:68.74609375,bottom:73.24609375,vCenter:42.74609375,hCenter:66.74609375,field:"bizInfo.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:50,height:13,width:200,title:"地址",textAlign:"left",right:181.5,bottom:76,vCenter:99,hCenter:69.5,field:"bizInfo.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:36,height:13,width:114,title:"联系人",textAlign:"left",right:342,bottom:77.5,vCenter:285,hCenter:71,field:"bizInfo.contact",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:260,top:50,height:13,width:114,title:"电话",textAlign:"left",right:343.5,bottom:91.75,vCenter:286.5,hCenter:85.25,field:"bizInfo.telephone",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:36,height:13,width:184.5,title:"单号",textAlign:"right",right:574.5,bottom:76,vCenter:482.25,hCenter:69.5,field:"ordersDetail.orders_no",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:390,top:50,height:13,width:183,title:"日期",textAlign:"right",right:574.5,bottom:91,vCenter:483,hCenter:84.5,field:"ordersDetail.orders_date",coordinateSync:!1,widthHeightSync:!1,formatter:'$utils.textFormatter("date")'},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:65,height:120,width:555,field:"ordersDetail.orders_goods",coordinateSync:!1,widthHeightSync:!0,right:565,bottom:96,vCenter:290,hCenter:69,tableHeaderRowHeight:26,tableBodyRowHeight:26,rowsColumnsMergeClean:!0,tableHeaderRepeat:"first",footerFormatter:"$utils.tableFooterFormatter()",tableFooterRepeat:"last",columns:[[{width:30,title:"序号",field:"searno",checked:!0,columnId:"searno",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"sequence",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:116,title:"商品名称",field:"goods_name",checked:!0,columnId:"goods_name",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"商品编号",field:"goods_no",checked:!0,columnId:"goods_no",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:80,title:"规格型号",field:"goods_spec",checked:!0,columnId:"goods_spec",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:30,title:"单位",field:"goods_unit",checked:!0,columnId:"goods_unit",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"数量",field:"goods_cnt",checked:!0,columnId:"goods_cnt",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"单价",field:"goods_price",checked:!0,columnId:"goods_price",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"小计",field:"total_money",checked:!0,columnId:"total_money",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""},{width:55,title:"备注",field:"remark",checked:!0,columnId:"remark",fixed:!1,rowspan:1,colspan:1,align:"center",tableColumnHeight:"30",tableTextType:"text",tableBarcodeMode:"CODE128A",tableQRCodeLevel:0,tableSummaryTitle:!0,tableSummary:""}]]},printElementType:{title:"订单数据",type:"table",editable:!0,columnDisplayEditable:!0,columnDisplayIndexEditable:!0,columnTitleEditable:!0,columnResizable:!0,columnAlignEditable:!0,isEnableEditField:!0,isEnableContextMenu:!0,isEnableInsertRow:!0,isEnableDeleteRow:!0,isEnableInsertColumn:!0,isEnableDeleteColumn:!0,isEnableMergeCell:!0}},{options:{left:20,top:200,height:13,width:166.5,title:"单位",textAlign:"left",right:181,bottom:234,vCenter:98,hCenter:227,field:"company.name",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:20,top:213,height:13,width:553.5,title:"地址",textAlign:"left",right:570,bottom:254.5,vCenter:293.25,hCenter:248,field:"company.address",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:192,top:200,height:13,width:94.5,title:"制单人",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,field:"ordersDetail.create_uname",coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:300,top:200,height:13,width:129,title:"发货人(盖章/签字）",textAlign:"left",right:359.25,bottom:233.5,vCenter:276,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}},{options:{left:440,top:200,height:13,width:129,title:"收货人(盖章/签字）",textAlign:"left",right:568.5,bottom:233.5,vCenter:504,hCenter:227,coordinateSync:!1,widthHeightSync:!1},printElementType:{title:"自定义",type:"text"}}],orient:2,paperNumberLeft:560,paperNumberTop:240,paperNumberContinue:!0,watermarkOptions:{},panelLayoutOptions:{}}]};t["default"]={name:"d241-93mm",type:"sales",data:n}},e439:function(e,t,i){"use strict";i("1202")},ee5e:function(e,t,i){},f059:function(e,t,i){"use strict";i("8fb8")},f9b2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"aux-card"},[i("div",{staticClass:"header",staticStyle:{"padding-bottom":"0","padding-top":"6px"}},[i("div",{staticClass:"left"},[i("el-menu",{staticClass:"el-menu-big no-border",attrs:{"default-active":e.navActive,mode:"horizontal"},on:{select:e.changeTabSelect}},e._l(e.compNavMenus,(function(t){return i("el-menu-item",{key:t.value,attrs:{index:t.value,disabled:!e.detail.state&&["stock","sign"].includes(t.value)}},[e._v(e._s(t.name))])})),1)],1),i("div",{staticClass:"right"},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sales-orders-print"],expression:"['sales-orders-print']"}],attrs:{disabled:e.dataLoading,type:"default",icon:"el-icon-printer"},on:{click:e.handlePrint}},[e._v("打印")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sales-orders-print"],expression:"['sales-orders-print']"}],attrs:{loading:e.pdfBuildProgress>0&&e.pdfBuildProgress<100,disabled:e.dataLoading,type:"default",icon:"el-icon-printer"},on:{click:e.handleOldPrint}},[e._v(" "+e._s(e.pdfBuildProgress>0&&e.pdfBuildProgress<100?"正在生成("+e.pdfBuildProgress+"%)":"旧版打印")+" ")]),e.$hasPermission("sales-orders-create")?i("el-button",{attrs:{type:"default",icon:"el-icon-document-copy"},on:{click:function(t){e.$common.toPage("/sales/orders/orders-create?type=copyAdd&id="+e.ordersId+"&t="+Date.now())}}},[e._v("复制")]):e._e(),e.allowEditOrders(e.detail)?i("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.$common.toPage("/sales/orders/orders-create?type=edit&id="+e.ordersId+"&t="+Date.now())}}},[e._v("修改")]):e._e(),0==e.detail.state&&e.$hasPermission("sales-orders-approve")?i("el-button",{attrs:{type:"primary",icon:"el-icon-document-checked"},on:{click:e.approvedOrders}},[e._v("审核通过")]):e._e(),2==e.detail.state&&e.$hasPermission("sales-orders-deliver")?i("el-button",{attrs:{type:"primary",icon:"el-icon-document-checked"},on:{click:e.deliverOrders}},[e._v("发货完成")]):e._e(),e.detail.state>1&&9!=e.detail.state&&e.$hasPermission("sales-orders-complete")&&([3,4].includes(e.detail.state)||!e.$hasModule("stock"))?i("el-button",{attrs:{type:"primary",icon:"el-icon-document-checked"},on:{click:e.completedOrders}},[e._v("标记完成")]):e._e(),e.detail.state>1&&e.$hasPermission("sales-orders-cancel")?i("el-button",{attrs:{type:"defaut",icon:"el-icon-edit"},on:{click:e.cancelOrders}},[e._v("撤销")]):e._e(),e.allowDeleteOrders(e.detail)?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:""},on:{click:e.deleteOrders}},[e._v("作废")]):e._e()],1)]),i("div",{staticClass:"margin-top-sm"},[i("div",{staticClass:"dflex-b padding-lr-lg"},[i("div",{staticClass:"padding-tb"},[i("div",{staticClass:"padding-bottom-sm"},[i("span",[e._v("销售单号："+e._s(e.detail.orders_no))]),i("span",{staticClass:"margin-left-lg"},[e._v("销售员："+e._s(e.detail.sales_name||e.detail.create_uname))]),i("span",{staticClass:"margin-left-lg"},[e._v(" 订单状态： "),i("el-tag",{attrs:{size:"small",type:9==e.detail.state?"success":"danger"}},[i("i",{class:9==e.detail.state?"el-icon-check":"el-icon-time"}),e._v(" 订单"+e._s(e._f("formatKeyValue")(e.detail.state,e.$constant.ORDERS_STATES,"value","next"))+" ")])],1)]),i("div",{staticClass:"padding-bottom-sm"},[i("span",[e._v("客户："+e._s(e.detail.receiver.name))]),e.detail.receiver.contact?i("span",{staticClass:"margin-left"},[e._v("联系人："+e._s(e.detail.receiver.contact))]):e._e(),e.detail.receiver.telephone?i("span",{staticClass:"margin-left"},[e._v("联系电话："+e._s(e.detail.receiver.telephone))]):e._e()])]),i("div",{staticClass:"tar ft-grey"},[i("div",{staticClass:"padding-bottom-sm"},[i("span",[e._v("开单日期："+e._s(e._f("formatDate")(e.detail.orders_date)))]),i("span",{staticClass:"margin-left-lg"},[e._v("制单人："+e._s(e.detail.create_uname))])])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"basic"==e.navActive,expression:"navActive == 'basic'"}]},[i("OrdersGoodsTable",{ref:"goodsTable",attrs:{data:e.detail.orders_goods,loading:e.dataLoading}}),i("div",{staticClass:"dflex-b padding padding-tb-lg"},[i("div",{staticClass:"dflex-s"}),i("div",{staticClass:"dflex-e"},[i("span",{staticClass:"padding-left-lg"},[e._v("原价金额："+e._s(e.detail.goods_original_money))]),i("span",{staticClass:"padding-left-lg"},[e._v("商品优惠："+e._s(e.detail.goods_discount_money))]),i("span",{staticClass:"padding-left-lg"},[e._v("整单优惠："+e._s(e.detail.orders_discount_money))]),i("span",{staticClass:"padding-left-lg"},[e._v("其他费用："+e._s(e.detail.orders_extend_fee))]),i("span",{staticClass:"padding-left-lg"},[e._v(" 订单金额： "),i("span",{staticClass:"ft-danger"},[e._v(e._s(e.detail.orders_total_money))])])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"settle"==e.navActive,expression:"navActive == 'settle'"}],staticClass:"dflex-b padding padding-tb-lg border-top"},[i("div",{staticClass:"dflex-s fs"},[i("span",{staticClass:"padding-right"},[e._v("订单金额："+e._s(e.detail.orders_total_money))]),i("span",{staticClass:"padding-right"},[e._v("已收款金额："+e._s(e.detail.settle_money))]),i("span",{staticClass:"padding-right"},[e._v(" 待收金额： "),i("span",{staticClass:"ft-danger"},[e._v(e._s(e.detail.unsettle_money))])])]),i("div",{staticClass:"dflex-e"},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["receipt-orders-create"],expression:"['receipt-orders-create']"}],attrs:{type:"success",icon:"el-icon-plus",disabled:9==e.detail.settle_state},on:{click:e.handleAddSettle}},[e._v("添加收款")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"stock"==e.navActive,expression:"navActive == 'stock'"}]},[i("OrdersGoodsTable",{ref:"goodsTable",attrs:{data:e.detail.orders_goods}}),1==e.detail.state?i("div",{staticClass:"margin-top"},[i("div",{staticClass:"header"},[e._m(0),i("div",{staticClass:"right dflex-e"},[i("AuxWarehouseSelect",{staticClass:"margin-right-sm",attrs:{label:"出库仓库"},model:{value:e.targetWarehouseId,callback:function(t){e.targetWarehouseId=t},expression:"targetWarehouseId"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-out"},on:{click:e.outStockOrders}},[e._v("立即出库")])],1)])]):e._e()],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"basic"==e.navActive,expression:"navActive == 'basic'"}]},[i("el-card",{staticClass:"aux-card margin-top",attrs:{shadow:"none","body-style":{padding:"12px"}}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[e._v("订单备注")])]),i("div",{staticClass:"padding-sm padding-tb-xs"},[e._v(e._s(e.detail.orders_remark))])]),i("el-card",{staticClass:"aux-card margin-top",attrs:{shadow:"none","body-style":{padding:"12px"}}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[e._v("内部备注")])]),i("div",{staticClass:"padding-sm padding-tb-xs"},[e._v(e._s(e.detail.create_remark))])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"stock"==e.navActive&&e.stockOrdersList.length>0,expression:"navActive == 'stock' && stockOrdersList.length > 0"}]},[i("div",{staticClass:"aux-card margin-top"},[e._m(1),e._l(e.stockOrdersList,(function(t){return i("div",{key:t._id,staticClass:"border-bottom"},[i("div",{staticClass:"padding"},[i("span",{staticClass:"padding-right-lg"},[e._v("出库单号："+e._s(t.opt_no))]),i("span",{staticClass:"padding-right-lg"},[e._v("出库时间："+e._s(e._f("formatDate")(t.opt_time)))]),i("span",{staticClass:"padding-right-lg"},[e._v("出库仓库："+e._s(t.warehouse_name))]),i("span",{staticClass:"padding-right-lg"},[e._v("操作人员："+e._s(t.create_uname))])]),i("orders-stock-goods-table",{ref:"stockGoodsTable",refInFor:!0,attrs:{data:t.orders_goods}})],1)}))],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"settle"==e.navActive&&e.settleOrdersList.length>0,expression:"navActive == 'settle' && settleOrdersList.length > 0"}]},[i("div",{staticClass:"aux-card margin-top"},[e._m(2),i("el-table",{staticClass:"aux-table",attrs:{data:e.settleOrdersList,border:""}},[i("el-table-column",{attrs:{width:"60",align:"center",label:"#"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),i("el-table-column",{attrs:{label:"收款单号",prop:"receipt_no",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{attrs:{to:"/accounting/receipt/orders-detail/"+t.row._id}},[i("span",{staticClass:"link-hover"},[e._v(e._s(t.row.receipt_no))])])]}}])}),i("el-table-column",{attrs:{label:"收款时间",prop:"receipt_date",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.receipt_date)))]}}])}),i("el-table-column",{attrs:{label:"收款金额",prop:"receipt_money",width:"200",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("cent2yuan")(t.row.receipt_money)))]}}])}),i("el-table-column",{attrs:{label:"支付方式",prop:"receipt_type",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatTypeName")(t.row.receipt_type,e.$constant.PAYMENT_TYPES)))]}}])}),i("el-table-column",{attrs:{label:"经办人员",prop:"create_uname",width:"200",align:"center"}}),i("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1)]),i("PrintDialog",{ref:"printDialog",on:{submit:e.submitPrint}}),i("PrintContainer",{ref:"printContainer",attrs:{filename:e.pdfFileName},on:{progress:function(t){e.pdfBuildProgress=t}}},[i(e.printContentCom,{ref:"printContentCom",tag:"component",attrs:{template:e.pdfTemplate,"orders-id":e.ordersId}})],1),i("AuxHiPrint",{ref:"auxHiPrint"})],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[e._v("待出库")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[e._v("出库记录")])]),i("div",{staticClass:"right dflex-e"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[e._v("收款记录")])]),i("div",{staticClass:"right dflex-e"})])}],a=i("5066"),l=i("c3dd"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"print-dialog",attrs:{title:"打印单据",visible:e.dialogVisible,width:"800px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-alert",{attrs:{title:"请注意：1.该版本打印功能，即将下线，请切换至新版打印。 2.新版打印支持即时打印预览、长订单打印时自动分页，模板定制。 3.如果新版不能满足你的打印需求，请联系管理员反馈。",type:"error","show-icon":"",effect:"dark"}}),i("el-form",{ref:"elForm",staticClass:"border-top",attrs:{"status-icon":"","label-width":"100px","label-position":"top",size:"small"}},[i("el-form-item",{attrs:{label:"通用模板"}},[i("div",{staticClass:"template-area dflex-b"},e._l(e.compDefaultTemplates,(function(t,n){return i("div",{key:n,staticClass:"pitem",class:{active:t.template==e.templateActive},on:{click:function(i){return e.selectTemplate(t,n)}}},[i("div",{staticClass:"icon el-icon-tickets"}),i("div",[e._v(e._s(t.name))])])})),0)]),i("el-form-item",{attrs:{label:"其他模板"}},[i("div",{staticClass:"template-area dflex-s"},[e._l(e.compOtherTemplates,(function(t,n){return i("div",{key:n,staticClass:"pitem",class:{active:t.template==e.templateActive},on:{click:function(i){return e.selectTemplate(t,n)}}},[i("div",{staticClass:"icon el-icon-tickets landscape"}),i("div",[e._v(e._s(t.name))])])})),i("div",{staticClass:"pitem margin-left-lg"},[i("el-tooltip",{attrs:{content:"定制专属打印模板，支持自定义样式，需要定制请联系管理员",placement:"top",effect:"dark"}},[i("div",[i("div",{staticClass:"icon el-icon-plus landscape"}),i("div",[e._v("模板定制")])])])],1)],2)])],1),i("div",{staticClass:"dflex-b padding-top-sm border-top"},[i("div",[i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.submit("preview")}}},[e._v("打印预览")]),i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.submit("download")}}},[e._v("导出PDF文件")]),i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.submit("setting")}}},[e._v("设置")])],1),i("div",[i("el-button",{attrs:{type:"default"},on:{click:e.close}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("print")}}},[e._v("立即打印")])],1)])],1)},s=[],d=i("2f62"),c=i("3f89");const p=[{type:"default",template:"a4",name:"A4",pdfFormat:"a4",size:[210,296],unit:"mm",orientation:"portrait"},{type:"default",template:"d241-140mm",name:"241*140mm",pdfFormat:"",size:[241,140],unit:"mm",orientation:"landscape"},{type:"default",template:"d190-130mm",name:"190*130mm",pdfFormat:"",size:[190,130],unit:"mm",orientation:"landscape"},{type:"default",template:"d241-93mm",name:"241*93mm",pdfFormat:"",size:[241,93],unit:"mm",orientation:"landscape"},{type:"default",template:"x58mm",name:"小票58mm",pdfFormat:"",size:[58,120],unit:"mm",orientation:"portrait"},{type:"default",template:"x80mm",name:"小票80mm",pdfFormat:"",size:[80,160],unit:"mm",orientation:"portrait"},{type:"other",template:"a4-l",name:"A4-横版",pdfFormat:"a4",size:[296,210],unit:"mm",orientation:"landscape"}];var m={name:"PrintDialog",data(){return{customTemplates:["66169570bd022087dfdebc40"],dialogVisible:!1,templates:p,templateActive:"a4",pdfOption:c["a"].state.pdfOption,printType:"local"}},computed:{...Object(d["b"])(["companyId"]),hasCustomTemplate(){return this.customTemplates.includes(this.companyId)},compDefaultTemplates(){return p.filter(e=>"default"===e.type)},compOtherTemplates(){return p.filter(e=>"other"===e.type)}},methods:{open(e={}){this.dialogVisible=!0},close(){this.dialogVisible=!1},selectTemplate(e){this.templateActive=e.template},submit(e){if(!this.templateActive)return;const t=p.filter(e=>e.template===this.templateActive);this.$emit("submit",e,Object.assign({},t[0])),this.close()}}},h=m,u=(i("59a9"),i("2877")),g=Object(u["a"])(h,r,s,!1,null,null,null),f=g.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"print-container"},[i("section",{staticClass:"layout-container",class:{"show-layout":e.showLayout,"unset-all":!e.floatLayout}},[i("section",{ref:"pdfContent",staticClass:"content-wrapper",style:{width:e.pdfContentWidth}},[e._t("default")],2)]),i("transition",{attrs:{name:"transition-anim"}},[e.previewModal&&e.pdfFileUrl?i("section",{staticClass:"pdf-preview"},[i("button",{staticClass:"close",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePreview(t)}}},[e._v("×")]),i("iframe",{attrs:{src:e.pdfFileUrl,width:"100%",height:"100%"}}),i("div",{staticClass:"btn-area"},[i("button",{staticClass:"close-btn",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePreview(t)}}},[e._v("关闭")]),i("button",{staticClass:"print-btn",on:{click:function(t){return t.target!==t.currentTarget?null:e.printPdf(t)}}},[e._v("立即打印")])])]):e._e()]),e.showControls?i("PrintControls",{staticClass:"control-area",attrs:{progress:e.progress},on:{close:e.closePreview}}):e._e()],1)},b=[],v=i("add5"),_=i.n(v),w=i("d67e"),C=i.n(w),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"control-container"},[i("h3",{staticClass:"control-header"},[e._v("控制参数")]),i("section",{staticClass:"item-container"},[e._l(e.controls,(function(t,n){return[!t.vVisble||t.vVisble&&e.controlValue[t.vVisble]?i("section",{key:n,staticClass:"control-item"},[i("section",{staticClass:"control"},[i("span",{staticClass:"item-label"},[e._v(e._s(t.label))]),["checkbox","number","text"].includes(t.inputType)?[i("input",{class:"checkbox"===t.inputType?"input-checkbox":"input-box",attrs:{type:t.inputType},domProps:{value:e.controlValue[t.vModel],checked:e.controlValue[t.vModel]},on:{input:function(i){return e.setInput(i,t.vModel,t.inputType)},change:function(i){return e.setInput(i,t.vModel,t.inputType)}}})]:e._e(),["textarea"].includes(t.inputType)?i("div",{staticClass:"input-textarea"},[i("textarea",{attrs:{cols:"30",rows:"4"},domProps:{value:e.controlValue[t.vModel]},on:{input:function(i){return e.setInput(i,t.vModel,t.inputType)},change:function(i){return e.setInput(i,t.vModel,t.inputType)}}})]):e._e(),["select"].includes(t.inputType)?[i("select",{directives:[{name:"model",rawName:"v-model",value:e.controlValue[t.vModel],expression:"controlValue[control.vModel]"}],on:{change:function(i){var n=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.controlValue,t.vModel,i.target.multiple?n:n[0])}}},e._l(t.options.split(","),(function(t,n){return i("option",{key:n,domProps:{value:t}},[e._v(e._s(t))])})),0)]:e._e()],2)]):e._e()]}))],2),i("button",{staticClass:"generate-btn",attrs:{disabled:e.isGenerating},on:{click:e.submit}},[e._v("关闭")])])},T=[],S={props:{progress:{type:Number,default:0}},computed:{...Object(d["b"])(["companyId"]),isGenerating(){return 0!==this.progress&&100!==this.progress}},data(){return{controlValue:c["a"].state.controlsValue,controls:[{label:"显示正标题",type:"Boolean",options:"是否显示标题",inputType:"checkbox",vModel:"showTitle"},{label:"正标题内容",type:"String",options:"正标题显示的内容",inputType:"text",vVisble:"showTitle",vModel:"title"},{label:"显示副标题",type:"Boolean",options:"是否副标题",inputType:"checkbox",vModel:"showSubTitle"},{label:"副标题内容",type:"String",options:"副标题显示的内容",inputType:"text",vVisble:"showSubTitle",vModel:"subTitle"},{label:"显示备注",type:"Boolean",options:"是否显示备注",inputType:"checkbox",vModel:"showRemark"},{label:"显示注意",type:"Boolean",options:"是否显示备注",inputType:"checkbox",vModel:"showExplain"},{label:"注意信息",type:"String",options:"自定义订单上注意提示信息",inputType:"text",vVisble:"showExplain",vModel:"explainText"},{label:"扩展信息",type:"String",options:"底部显示的扩展信息",inputType:"textarea",vModel:"expandText"}]}},created(){c["a"].commit("load",this.companyId)},methods:{setInput(e,t,i){let n=e.target.value;"checkbox"===i&&(n=e.target.checked),"number"===i&&(n=e.target.value?parseFloat(e.target.value):0),this.$set(this.controlValue,t,n)},submit(){this.$emit("close"),c["a"].commit("save",this.companyId)}}},k=S,E=(i("f059"),Object(u["a"])(k,x,T,!1,null,"e4db59bc",null)),D=E.exports,O={components:{PrintControls:D},props:{filename:{type:String,default:""+(new Date).getTime()},paginateElementsByHeight:{type:Number,default:1400},manualPagination:{type:Boolean,default:!0},htmlToPdfOptions:{type:Object,default:null}},data(){return{showLayout:!1,floatLayout:!0,previewModal:!1,showControls:!1,pdfUnit:"mm",pdfFormat:"a4",pdfFormatSize:[],pdfContentWidth:"210mm",pdfOrientation:"portrait",hasAlreadyParsed:!1,progress:0,pdfFileUrl:null}},watch:{progress(e){this.$emit("progress",e)},paginateElementsByHeight(){this.resetPagination()},$props:{handler(){this.validateProps()},deep:!0,immediate:!0}},methods:{validateProps(){this.manualPagination||void 0===this.paginateElementsByHeight&&console.error("Error: paginate-elements-by-height is required if manual-pagination is false")},resetPagination(){const e=this.$refs.pdfContent.firstChild,t=e.getElementsByClassName("html2pdf__page-break"),i=t.length-1;if(-1!==i){this.hasAlreadyParsed=!1;for(let e=i;e>=0;e--)t[e].parentNode.removeChild(t[e])}},closePreview(){this.pdfFileUrl=null,this.previewModal=!1,this.showControls=!1,this.showLayout=!1},async openControls(e){this.initPdfOptions(e),this.showControls=!0,this.showLayout=!0,this.progress=100},async generatePdf(e,t){t&&this.initPdfOptions(t),this.progress=0,this.paginationOfElements();const i=this.$refs.pdfContent,n=this.getPdfOptions(),o=C()().set(n).from(i);if("download"==e){this.$emit("beforeDownload",{html2pdf:C.a,options:n,pdfContent:i});const e=await o.save().output("bloburl"),t=await fetch(e),a=await t.blob();this.$emit("hasDownloaded",a,e)}else this.pdfFileUrl=await o.output("bloburl"),"preview"==e?this.previewModal=!0:this.printPdf();this.progress=100},initPdfOptions(e){this.pdfUnit=e.unit||"mm",this.pdfFormat=e.pdfFormat,this.pdfOrientation=e.orientation||"portrait",this.pdfContentWidth=e.size[0]+(e.unit||"mm"),this.pdfFormatSize=e.size,this.pdfTemplate=e.template},paginationOfElements(){if(this.$emit("beginPagination"),this.progress=25,!this.manualPagination){if(this.hasAlreadyParsed)this.progress=70;else{const e=this.$refs.pdfContent.firstChild,t=Array.from(e.children);let i=0;for(const n of t){const t=n.classList[0],o="html2pdf__page-break"===t;if(o)i=0;else{const t=n.clientHeight,o=n.currentStyle||window.getComputedStyle(n),a=parseInt(o.marginTop)+parseInt(o.marginBottom),l=t+a;if(i+t<this.paginateElementsByHeight)i+=l;else{const t=document.createElement("div");t.classList.add("html2pdf__page-break"),e.insertBefore(t,n),i=l}}}this.progress=70,this.hasAlreadyParsed=!0}this.$emit("hasPaginated")}},getPdfOptions(){let e={margin:0,filename:this.filename||this.filename+".pdf",image:{type:"jpeg",quality:.98},enableLinks:!0,html2canvas:{dpi:300,scale:3.125,useCORS:!0},jsPDF:{unit:this.pdfUnit,format:this.pdfFormat||this.pdfFormatSize,orientation:this.pdfOrientation}};return void 0!==this.htmlToPdfOptions&&null!==this.htmlToPdfOptions&&(e=Object.assign(e,this.htmlToPdfOptions)),e},printPdf(){_()({printable:this.pdfFileUrl,type:"pdf",showModal:!1})}}},A=O,I=(i("53dd"),Object(u["a"])(A,y,b,!1,null,"23baa262",null)),H=I.exports,L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"printer-dialog",attrs:{title:"打印单据",visible:e.dialogVisible,width:"800px",top:"50px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],staticClass:"border-top padding-lg"},[e.customTemplates.length>0?[i("div",{staticClass:"padding-bottom-sm"},[e._v("专属模板")]),i("div",{staticClass:"temp-area grid-box_6 margin-bottom"},[e._l(e.customTemplates,(function(t,n){return i("div",{key:n,staticClass:"pitem",class:{active:t._id==e.templateActive},on:{click:function(i){return e.selectTemplate(t,n)}}},[i("div",{staticClass:"icon el-icon-tickets"}),i("div",[e._v(e._s(t.name))])])})),i("div",{staticClass:"pitem"},[i("el-tooltip",{attrs:{content:"定制专属打印模板，支持自定义样式，需要定制请联系管理员",placement:"top",effect:"dark"}},[i("div",[i("div",{staticClass:"icon el-icon-plus landscape"}),i("div",[e._v("模板定制")])])])],1)],2)]:e._e(),i("div",{staticClass:"padding-bottom-sm"},[e._v("通用模板")]),i("div",{staticClass:"temp-area grid-box_6"},[e._l(e.defaultTemplates,(function(t,n){return i("div",{key:n,staticClass:"pitem",class:{active:t.template==e.templateActive},on:{click:function(i){return e.selectTemplate(t,n)}}},[i("div",{staticClass:"icon el-icon-tickets"}),i("div",[e._v(e._s(t.name))])])})),i("div",{staticClass:"pitem"},[i("el-tooltip",{attrs:{content:"定制专属打印模板，支持自定义样式，需要定制请联系管理员",placement:"top",effect:"dark"}},[i("div",[i("div",{staticClass:"icon el-icon-plus landscape"}),i("div",[e._v("模板定制")])])])],1)],2),i("div",{staticClass:"dflex-b padding-top-sm border-top margin-top"},[i("div",[i("el-button",{attrs:{type:"default"},on:{click:e.previewShow}},[e._v("打印预览")]),e.$route.query.along||"640de865e766bb29750bce3a"==e.companyId?i("el-button",{attrs:{type:"default"},on:{click:e.templateShow}},[e._v("模板设计")]):e._e()],1),i("div",[i("el-button",{attrs:{type:"primary",loading:e.waitPrinter,icon:"el-icon-printer"},on:{click:e.print2}},[e._v("立即打印")]),i("el-button",{attrs:{type:"primary",loading:e.waitPrinter,icon:"el-icon-printer"},on:{click:e.print}},[e._v("浏览器打印")])],1)])],2),i("template-design",{ref:"templateDesign",on:{preview:e.designPreview}}),i("print-preview",{ref:"printPreview"})],1)},P=[],M=i("2197"),F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"mask-closable":!1,fullscreen:"","append-to-body":"","custom-class":"template-dialog"},on:{close:e.closeModal}},[i("template",{slot:"title"},[i("div",{staticClass:"dflex"},[i("div",{staticClass:"title"},[e._v(" 模板设计（ "),i("el-link",{attrs:{type:"primary"},on:{click:e.editTitle}},[e._v(e._s(e.template.name||""))]),e._v(" ） ")],1),i("div",{staticClass:"flex1 dflex-e"},[i("el-button",{attrs:{loading:e.waitShowPrinter,type:"primary",icon:"el-icon-view"},on:{click:function(t){return t.stopPropagation(),e.previewTemplate(t)}}},[e._v("预览")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-document-checked"},on:{click:function(t){return t.stopPropagation(),e.saveTemplate(t)}}},[e._v("保存模板")])],1),i("div",{staticStyle:{width:"50px"}})])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.spinning,expression:"spinning"}],staticStyle:{"min-height":"100px",background:"#f1f1f1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMultiPanel,expression:"isMultiPanel"}],staticStyle:{margin:"14px 0 0 10px"},attrs:{id:"template-preview-printPagination"}}),i("div",{staticClass:"template-design"},[i("div",{staticClass:"left-box",attrs:{id:"template-left"}}),i("div",{staticClass:"flex1",attrs:{id:"template-preview"}}),i("div",{staticClass:"right-box",attrs:{id:"template-setting"}})]),i("el-row",[i("el-col",{attrs:{span:6}}),i("el-col",{attrs:{span:18}},[i("div",{attrs:{id:"template-preview"}})]),i("el-col",{attrs:{span:6}},[i("div",{attrs:{id:"template-setting"}})])],1)],1)],2)},R=[],B=i("0f64");let N;var z={name:"TemplateDesign",components:{},data(){return{visible:!1,spinning:!0,waitShowPrinter:!1,isMultiPanel:!0,hiprintTemplate:{},template:{},templateData:{},printData:{},extendCss:""}},methods:{closeModal(){this.visible=!1},show(e,t){const i=this;this.visible=!0,this.spinning=!0,this.template=e,this.templateData=e.data,this.printData=t,this.extendCss=e.extendCss||"",this.extendCss.length>1&&$(this.extendCss).appendTo($("link[media=print]"));const n=$("#template-preview").length<=0||$("#template-setting").length<=0;do{return void setTimeout(()=>{$("#template-preview").empty();const t=[{title:"微软雅黑",value:"Microsoft YaHei"},{title:"黑体",value:"STHeitiSC-Light"},{title:"思源黑体",value:"SourceHanSansCN-Normal"},{title:"王羲之书法体",value:"王羲之书法体"},{title:"宋体",value:"SimSun"},{title:"华为楷体",value:"STKaiti"},{title:"cursive",value:"cursive"},{title:"仿宋",value:"仿宋"}];i.hiprintTemplate=N=new B["hiprint"].PrintTemplate({template:e.data,settingContainer:"#template-setting",paginationContainer:"#template-preview-printPagination",fontList:t}),N.design($("#template-preview")),i.isMultiPanel=e.data.panels.length>1,console.log("isMultiPanel",i.isMultiPanel),i.spinning=!1},200)}while(n)},editTitle(){const e=this;this.$prompt("请填写模板名称","编辑名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.template.name,inputPlaceholder:"请填写模板名称"}).then(({value:t})=>{e.template.name=t})},previewTemplate(){const e=this.hiprintTemplate.getJson()||{},t=Object.assign({},this.template,{data:e});this.$emit("preview",{template:t,printData:this.printData})},async saveTemplate(){const e=this.hiprintTemplate.getJson()||{},t=Object.assign({templateId:this.template._id||""},this.template,{data:e}),i=await Object(M["a"])("printer/saveTemplate",t,{functionName:"xunda"});this.template._id=i.data||"",this.template.data=e,this.$message.success("保存成功")}}},j=z,Q=(i("e439"),Object(u["a"])(j,F,R,!1,null,null,null)),V=Q.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"mask-closable":!1,width:"90%",top:"50px","append-to-body":"","custom-class":"preview-dialog"},on:{close:e.closeModal}},[i("template",{slot:"title"},[i("div",{staticClass:"dflex"},[i("div",{staticClass:"title"},[e._v("打印预览")]),i("div",{staticClass:"flex1 dflex-c"},[i("div",{staticClass:"padding-sm"},[e._v("选择打印机")]),i("el-select",{staticStyle:{width:"200px",padding:"0 5px"},attrs:{placeholder:"请选择打印服务"},on:{change:e.changePrinter},model:{value:e.printerId,callback:function(t){e.printerId=t},expression:"printerId"}},e._l(e.printerList,(function(e){return i("el-option",{key:e.name,attrs:{value:e._id,label:e.name}})})),1),i("el-select",{staticStyle:{width:"300px",padding:"0 5px"},attrs:{loading:e.devicesLoading,"loading-text":"正在获取打印机～",placeholder:"请选择打印机"},on:{change:e.changeDevice},model:{value:e.deviceId,callback:function(t){e.deviceId=t},expression:"deviceId"}},e._l(e.deviceList,(function(e){return i("el-option",{key:e.name,attrs:{value:e.name}})})),1),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return t.stopPropagation(),e.refreshPrinter(t)}}}),i("el-button",{attrs:{type:"primary",loading:e.printerLoading,icon:"el-icon-printer"},on:{click:function(t){return t.stopPropagation(),e.print2(t)}}},[e._v("直接打印")]),i("el-button",{attrs:{type:"primary",loading:e.printerLoading,icon:"el-icon-printer"},on:{click:function(t){return t.stopPropagation(),e.print(t)}}},[e._v("浏览器打印")]),i("el-button",{attrs:{type:"success",loading:e.exportLoading,icon:"el-icon-document"},on:{click:function(t){return t.stopPropagation(),e.toPdf(t)}}},[e._v("导出PDF")])],1)])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.previewSpinning,expression:"previewSpinning"}],staticStyle:{"min-height":"100px",background:"#f1f1f1"}},[i("div",{staticClass:"content_design",attrs:{id:"preview_content_design"}})])],2)},W=[],U={name:"PreviewDialog",props:{},data(){return{visible:!1,exportLoading:!1,printerLoading:!1,previewSpinning:!0,printerId:"local",deviceId:"",deviceList:[],devicesLoading:!1,width:0,hiprintTemplate:{},printData:{}}},computed:{...Object(d["b"])(["companyId","printer"]),printerList(){const e=[{_id:"local",name:"本地打印",service_url:"http://localhost:17521",service_auth:"kxkprinter"}],t=this.printer.printerList.filter(e=>"cloud-trans"==e.type).map(e=>(e.service_auth="kxkprinter-"+e.device_id,e));return e.push(...t),e}},methods:{closeModal(){this.visible=!1},show(e,t,i="210"){this.printerId=this.printer.printerId,this.deviceId=this.printer.printerInfo.deviceId,this.visible=!0,this.previewSpinning=!0,this.printData=t,this.hiprintTemplate=e,this.hiprintTemplate.on("printSuccess",e=>{this.printerLoading=!1,this.$notify.success({title:"打印提示",message:"正在打印中，请稍候"})}),this.hiprintTemplate.on("printError",e=>{this.printerLoading=!1,this.$notify.error({title:"打印失败",message:e.msg||"打印失败，请重试"})}),setTimeout(()=>{$("#preview_content_design").html(e.getHtml(t)),this.previewSpinning=!1},500),window.hiwebSocket.opened&&(this.deviceList=e.getPrinterList())},changePrinter(e){this.deviceList=[],this.deviceId="",this.devicesLoading=!0;const t=this.printerList.filter(t=>t._id==e),i=t[0];this.$store.commit("printer/setPrinter",e),window.hiwebSocket.setHost(i.service_url,i.service_auth),setTimeout(()=>{this.deviceList=this.hiprintTemplate.getPrinterList(),this.devicesLoading=!1},1e3)},changeDevice(e){var t;const i=this.deviceList.filter(t=>t.name==e),n=i[0]||{};this.$store.commit("printer/setPrinterDevice",{deviceId:n.name,clientId:null===(t=n.server)||void 0===t?void 0:t.clientId})},refreshPrinter(){this.doOperationWhenClientConnected(()=>{this.deviceList=this.hiprintTemplate.getPrinterList(),this.deviceList.length>0?this.$message.success("刷新成功"):this.$message.error("未检测到打印设备，请检查打印助手是否离线")})},print(){this.printerLoading=!0,this.hiprintTemplate.print(this.printData,{},{callback:()=>{console.log("callback"),this.printerLoading=!1}})},print2(){this.printerLoading=!0,setTimeout(()=>this.printerLoading=!1,3e3),this.doOperationWhenClientConnected(()=>{const{deviceId:e="",clientId:t=""}=this.printer.printerInfo;this.hiprintTemplate.print2(this.printData,{printer:e,client:t,title:Date.now()+".pdf"},{callback:e=>{console.log("callback",e),this.printerLoading=!1}})})},doOperationWhenClientConnected(e){window.hiwebSocket.opened?null===e||void 0===e||e():this.showPrintClientError()},toPdf(){this.exportLoading=!0,setTimeout(()=>{this.hiprintTemplate.toPdf(this.printData,Date.now()+".pdf",{scale:2}).then(e=>{console.log("type:"),console.log(e),this.exportLoading=!1})},300),setTimeout(()=>this.exportLoading=!1,3e3)},showPrintClientError(){this.$alert(`<div>连接【${window.hiwebSocket.host}】打印服务失败！<br />请确保目标机器已<a href="https://www.yuque.com/lzkxk/nigx3v/hphkzzudnyr3fpit" target="_blank" class='ft-primary'>【下载快销客打印助手】</a>并\n                        <a href="kxkprint://" class='ft-primary' target="_blank">【运行】</a>打印服务！ </div>`,"客户端未连接",{dangerouslyUseHTMLString:!0})}}},Y=U,G=(i("4638"),Object(u["a"])(Y,q,W,!1,null,null,null)),J=G.exports;const K=i("d521"),X={};K.keys().forEach(e=>{const t=e.replace(/\.\//,"").replace(/(\.js)/,"");X[t]=Object.assign(X[t]||{},K(e).default)});var Z=X;const ee=[{type:"default",template:"a4",name:"A4",pdfFormat:"a4",size:[210,296],unit:"mm",orientation:"portrait"},{type:"default",template:"d241x140mm",name:"241x140mm",pdfFormat:"",size:[241,140],unit:"mm",orientation:"landscape"},{type:"default",template:"d190x130mm",name:"190x130mm",pdfFormat:"",size:[190,130],unit:"mm",orientation:"landscape"},{type:"default",template:"d241x93mm",name:"241x93mm",pdfFormat:"",size:[241,93],unit:"mm",orientation:"landscape"},{type:"default",template:"a4xl",name:"A4-横版",pdfFormat:"a4",size:[296,210],unit:"mm",orientation:"landscape"}];var te=i("81b0"),ie=i.n(te),ne=i("8d35"),oe=i.n(ne),ae=i("bf5b"),le=i.n(ae);const re={sales:"销售单","sales-refund":"销退单",purchase:"采购单","purchase-refund":"购退单",receipt:"收款单",payment:"付款单"},se={formatDate(e,t="YYYY-MM-DD HH:mm:ss"){return e?oe()(e).format(t):""},yuan2cent(e){return le.a.mul(Number(e),100).toFixed(1)},cent2yuan(e){const t=le.a.div(Number(e),100).toFixed(3);return String(t).endsWith("0")?Number(t).toFixed(2):t},formatPrice(e,t=3){const i=Number(e).toFixed(t);return String(i).endsWith("0")?Number(i).toFixed(2):i},toBigMoney(e){const t=["角","分","厘"],i=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);let a="";for(let l=0;l<t.length;l++)a+=(i[Math.floor(10*e*Math.pow(10,l))%10]+t[l]).replace(/零./,"");a=a||"整",e=Math.floor(e);for(let l=0;l<n[0].length&&e>0;l++){let t="";for(let o=0;o<n[1].length&&e>0;o++)t=i[e%10]+n[1][o]+t,e=Math.floor(e/10);a=t.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][l]+a}return o+a.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},tableColumnFormatter(e,...t){return function(i,n,o,a){if("cent2yuan"==e){const e=i||n[t[0]]||0;return se.cent2yuan(e)}if("formatPrice"==e){const e=isNaN(t[0])?n[t[0]]:t[0];return se.formatPrice(i||e||0)}return i}},tableFooterFormatter(e={showRemark:!0,showExplain:!0,explainText:""}){return function(t,i,n,o){const{ordersDetail:a={}}=n||{},l=t.columns[0].columns.length,r=[],s=se.toBigMoney(a.orders_total_money||0),d=a.orders_total_money||0;if(r.push(`<tr><td style='text-align: center;'>合计</td><td style='padding: 8px 6px' colspan='${l-4}'>(金额大写) ${s}</td><td style='padding: 8px 6px' colspan='6'>(小写)  ${d}</td></tr>`),e.showRemark){const e=a.remark||"";r.push(`<tr><td style='text-align: center; padding: 8px 6px'>备注</td><td style='padding: 8px 6px' colspan='12'>${e}</td></tr>`)}if(e.showExplain){const t=e.explainText||"注意：单据中所列货物之数量、质量及单价请及时核验，确认无误后签收，感谢您的支持与配合。";r.push(`<tr><td style='padding: 8px' colspan='15'>${t}</td></tr>`)}return r.join("")}},textFormatter(e,...t){return function(i,n,o,a,l){if("date"==e)return se.formatDate(n,t[0]);if("cent2yuan"==e)return se.cent2yuan(n);if("ordersType"==e){const{ordersType:e=""}=a||{};return e?`(${re[e]})`:""}}},joinFormatter(e="-",...t){return function(i,n,o,a,l){const r=Array.from(t).map(e=>ie.a.get(a,e));return r.join(e)}}};var de=se,ce=i("cf45");function pe(e,t){const{company:i,orders:n,theme_data:o={},print_data:a={}}=t,{receiver:l,store:r,supplier:s,orders_goods:d}=n,c=Object.assign({},n);return c.orders_date=ce["a"].format(n.orders_date),c.orders_no=n.orders_no,c.remark=n.orders_remark||n.remark,c.create_uname=n.create_uname,c.approved_uname=n.approved_uname||"",["sales","sales-refund","purchase","purchase-refund"].includes(e)&&(c.orders_goods=d.map(t=>{const i=Object.assign({},t);return["sales","sales-refund"].includes(e)&&(i.goods_ori_price=ce["a"].cent2yuan(t.goods_ori_price||i.goods_price),i.total_ori_money=ce["a"].cent2yuan(t.total_ori_money||i.total_money),i.goods_rate=ce["a"].formatPrice(t.goods_rate||100)),i.goods_price=ce["a"].cent2yuan(t.goods_price),i.total_money=ce["a"].cent2yuan(t.total_money),i}),c.goods_total_count=n.goods_total_count||n.orders_goods_count,c.goods_total_money=ce["a"].cent2yuan(n.goods_total_money||n.orders_total_money),c.goods_original_money=ce["a"].cent2yuan(n.goods_original_money||n.goods_total_money),c.goods_discount_money=ce["a"].cent2yuan(n.goods_discount_money||0),c.orders_total_money=ce["a"].cent2yuan(n.orders_total_money||0),c.orders_discount_money=ce["a"].cent2yuan(n.orders_discount_money||0),c.orders_extend_fee=ce["a"].cent2yuan(n.orders_extend_fee||0),n.orders_extend_fees=(n.orders_extend_fees||[]).map(e=>(e.fee=ce["a"].cent2yuan(e.fee),e)),c.settle_money=ce["a"].cent2yuan(n.settle_money||0),c.settle_chargeoff_money=ce["a"].cent2yuan(c.settle_chargeoff_money||0),c.settle_discount_money=ce["a"].cent2yuan(n.settle_discount_money||0),c.unsettle_money=ce["a"].cent2yuan(n.unsettle_money||0),c.prev_unsettle_money=ce["a"].cent2yuan(n.prev_unsettle_money||0),c.total_unsettle_money=ce["a"].cent2yuan(n.total_unsettle_money||0),c.total_unsettle_count=n.total_unsettle_count),["receipt"].includes(e)&&(c.orders_total_money=ce["a"].cent2yuan(n.orders_total_money||0),c.receipt_money=ce["a"].cent2yuan(n.receipt_money||0),c.discount_money=ce["a"].cent2yuan(n.discount_money||0),c.total_unsettle_money=ce["a"].cent2yuan(n.total_unsettle_money||0),c.prev_unsettle_money=ce["a"].cent2yuan(n.prev_unsettle_money||0)),{ordersType:e,ordersDetail:c,company:i,bizInfo:l||r||s,themeSet:o,printSet:a}}var me={formatOrders:pe},he={name:"AuxHiPrint",components:{printPreview:J,templateDesign:V},data(){return{dialogVisible:!1,templateActive:"a4",dataLoading:!1,ordersType:"",ordersId:"",ordersData:null,waitPrinter:!1}},computed:{...Object(d["b"])(["companyId","printer"]),defaultTemplates(){return ee.filter(e=>"default"===e.type)},customTemplates(){return this.printer.templates}},methods:{async open(e="sales",t){this.dialogVisible=!0,e==this.ordersType&&t==this.ordersId||(this.ordersType=e,this.ordersId=t,this.ordersData=null),B["hiprint"].init(),window.$utils=de,this.$store.dispatch("printer/loadTemplates"),this.$store.dispatch("printer/loadPrinters"),this.templateActive=localStorage.getItem("sales-print-template")||"a4"},close(){this.dialogVisible=!1},async previewShow(){const e=await this.getTemplate(this.templateActive),t=await this.getPrintData(),i=new B["hiprint"].PrintTemplate({template:e.data});this.$refs.printPreview.show(i,t)},async templateShow(){const e=await this.getTemplate(),t=await this.getPrintData();this.$refs.templateDesign.show(e,t)},async getTemplate(){const e=Z[this.templateActive];if(e)return e;const t=this.customTemplates.filter(e=>e._id==this.templateActive);return t[0]},async getPrintData(){if(this.ordersData)return this.ordersData;this.dataLoading=!0;const e=await this.getBizOrders(this.ordersType,this.ordersId);return this.ordersData=me.formatOrders(this.ordersType,e),this.dataLoading=!1,this.ordersData},designPreview({template:e,printData:t}){const i=new B["hiprint"].PrintTemplate({template:e.data});this.$refs.printPreview.show(i,t)},selectTemplate(e){this.templateActive=e._id||e.template,localStorage.setItem("sales-print-template",this.templateActive)},async print(){this.waitPrinter=!0;const e=await this.getTemplate(),t=await this.getPrintData(),i=new B["hiprint"].PrintTemplate({template:e.data});i.print(t,{},{callback:()=>{console.log("callback"),this.waitPrinter=!1}})},async print2(){this.waitPrinter=!0,setTimeout(()=>this.waitPrinter=!1,3e3),this.doOperationWhenClientConnected(async()=>{const e=await this.getTemplate(),t=await this.getPrintData(),{deviceId:i="",clientId:n=""}=this.printer.printerInfo,o=new B["hiprint"].PrintTemplate({template:e.data});o.print2(t,{printer:i,client:n,title:Date.now()+".pdf"},{callback:()=>{this.waitPrinter=!1,console.log("callback")}})})},doOperationWhenClientConnected(e){window.hiwebSocket.opened?null===e||void 0===e||e():(this.waitPrinter=!1,this.$alert(`<div>连接【${window.hiwebSocket.host}】打印服务失败！<br />请确保目标服务器已<a href="https://www.yuque.com/lzkxk/nigx3v/hphkzzudnyr3fpit" target="_blank" class='ft-primary'>【下载快销客打印助手】</a>并\n                        <a href="kxkprint://" class='ft-primary' target="_blank">【运行】</a>打印服务！ </div>`,"客户端未连接",{dangerouslyUseHTMLString:!0}))},async getBizOrders(e,t){const i={sales:"orders/getOrdersView","sales-refund":"orders/getRefundOrdersView",purchase:"purchase/getOrdersView","purchase-refund":"purchase/getRefundOrdersView"},n=await Object(M["a"])(i[e],{ordersId:t},{functionName:"xunda"});return n.data}}},ue=he,ge=(i("22c5"),Object(u["a"])(ue,L,P,!1,null,null,null)),fe=ge.exports,ye={name:"SalesOrdersDetail",components:{OrdersGoodsTable:a["a"],AuxWarehouseSelect:l["a"],PrintContainer:H,PrintDialog:f,AuxHiPrint:fe},computed:{...Object(d["b"])(["companyId"]),compNavMenus(){return this.navMenus.filter(e=>this.$hasModule(e.module||""))}},data(){return{permission:"sales-orders-query",navMenus:[{name:"订单详情",value:"basic"},{name:"出库/发货",value:"stock",module:"stock"},{name:"结算收款",value:"settle"}],navActive:"basic",dataLoading:!1,ordersId:"",detail:{receiver_id:"",receiver:{_id:"",name:"客户",contact:"",telephone:"",address:"请选择销售的客户",sale_grade:0},orders_date:Date.now(),orders_no:"",orders_remark:"",create_remark:"",create_uname:"",state:"",orders_goods:[],goods_total_count:0,goods_original_money:0,goods_discount_money:0,goods_total_money:0,orders_discount_money:0,orders_extend_fee:0,orders_total_money:0,settle_state:"",settleMoney:0,unsettleMoney:0},ordersIdentifys:[],wareHouseList:[],stockChecked:!1,targetWarehouseId:"",stockOrdersList:[],settleOrdersList:[],printContentCom:null,pdfBuildProgress:0,pdfFileName:"销售单-"+(new Date).getTime()+".pdf",pdfTemplate:"a4"}},mounted(){const{ordersId:e}=this.$route.params||{};e&&(this.ordersId=e,this.fetchDetail())},methods:{initContentComponent(){let e;e="66169570bd022087dfdebc40"==this.companyId?()=>Promise.all([i.e("chunk-2d0be333"),i.e("chunk-1556f758")]).then(i.bind(null,"5b46")):"65748600337a9f0756697a2e"==this.companyId?()=>i.e("chunk-3682aa27").then(i.bind(null,"32353")):"65ffdd27652341ed5e149e69"==this.companyId?()=>i.e("chunk-557332aa").then(i.bind(null,"dd79")):()=>i.e("chunk-500ce345").then(i.bind(null,"4318")),this.printContentCom=e},changeTabSelect(e){this.navActive=e,"stock"===this.navActive&&this.fetchStockDetail(),"settle"===this.navActive&&this.fetchSettleDetail()},fetchDetail(){this.dataLoading=!0,Object(M["a"])("orders/getOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.initOrdersData(e.data),this.dataLoading=!1},e=>{this.dataLoading=!1})},initOrdersData(e){const t=this.detail=Object.assign({},e);t.receiver_id=e.receiver_id,t.receiver=e.receiver,t.orders_date=e.orders_date,t.orders_no=e.orders_no,t.orders_remark=e.orders_remark,t.create_remark=e.create_remark,t.create_uname=e.create_uname,t.goods_total_count=e.goods_total_count||e.orders_goods_count,t.goods_total_money=this.$common.cent2yuan(e.goods_total_money||e.orders_total_money||0),t.goods_discount_money=this.$common.cent2yuan(e.goods_discount_money||0),t.goods_original_money=this.$common.cent2yuan(e.goods_original_money||e.goods_total_money||e.orders_total_money),t.orders_total_money=this.$common.cent2yuan(e.orders_total_money),t.orders_extend_fee=this.$common.cent2yuan(e.orders_extend_fee||0),t.orders_discount_money=this.$common.cent2yuan(e.orders_discount_money||0),t.settle_money=this.$common.cent2yuan(e.settle_money||0),t.unsettle_money=(Number(t.orders_total_money)-Number(t.settle_money)).toFixed(2),t.orders_goods=e.orders_goods.map(e=>{const t=Object.assign({},e);return t.goods_ori_price=this.$common.cent2yuan(e.goods_ori_price||t.goods_price),t.total_ori_money=this.$common.cent2yuan(e.total_ori_money||t.total_money),t.goods_rate=Number(e.goods_rate||100).toFixed(2),t.total_money=this.$common.cent2yuan(e.total_money),t.goods_price=this.$common.cent2yuan(e.goods_price),t})},fetchStockDetail(){if(this.stockOrdersList.length>0)return;const e=this.detail.stock_ids||(this.detail.rel_stock_id?[this.detail.rel_stock_id]:[]);0!==e.length&&Object(M["a"])("stock/listStockStream",{stockIds:e},{functionName:"xunda"}).then(e=>{this.stockOrdersList=(e.data||[]).map(e=>{const t=e.orders_goods.map(e=>{const t=Object.assign({},e);return t.total_money=this.$common.cent2yuan(e.total_money),t.goods_price=this.$common.cent2yuan(e.goods_price),t});return e.orders_goods=t,e})})},fetchSettleDetail(){if(this.settleOrdersList.length>0)return;const e=this.detail.settle_orders_ids||[];if(0===e.length)return;const t=Object.assign({pageSize:20,pageNo:1},{receiptId:e});Object(M["a"])("settle/listReceiptOrders",t,{functionName:"xunda"}).then(e=>{this.settleOrdersList=e.data||[]})},approvedOrders(){this.$confirm("确定要通过该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{Object(M["a"])("orders/approvedOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"操作成功!"}),this.fetchDetail()})})},allowEditOrders(e){if(9==e.state)return!1;const t=this.$hasDataPermission(e.create_uid)&&e.state<1,i=this.$hasPermission(["sales-orders-approve","approve-orders-all"])&&(e.state<=1||!this.$hasModule("stock")),n=t||i;return n},allowDeleteOrders(e){const t=this.$hasAdmin()||this.$hasDataPermission(e.create_uid)&&!e.state||this.$hasPermission(["approve-orders-all","sales-orders-delete"])&&[0,1].includes(e.state);return t},deleteOrders(){this.$confirm("确定要删除该订单？","告警提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(M["a"])("orders/deleteOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"删除成功!"}),setTimeout(()=>this.$common.closePage(),500)})})},outStockOrders(){this.$confirm("确定要出库嘛？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{Object(M["a"])("orders/outStock",{ordersId:this.ordersId,warehouseId:this.targetWarehouseId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"操作成功!"}),this.fetchDetail(),setTimeout(()=>this.fetchStockDetail(),500)})})},cancelOrders(){this.$confirm("确定要撤销嘛？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{Object(M["a"])("orders/cancelOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"操作成功!"}),this.fetchDetail()})})},deliverOrders(){Object(M["a"])("orders/deliverOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"操作成功!"}),this.fetchDetail()})},completedOrders(){Object(M["a"])("orders/completeOrders",{ordersId:this.ordersId},{functionName:"xunda"}).then(e=>{this.$message({type:"success",message:"操作成功!"}),this.fetchDetail()})},handleAddSettle(){const e={ordersType:"sales",ordersId:this.ordersId};this.$router.push({path:"/accounting/receipt/orders-create",query:e})},handleOldPrint(){this.$refs.printDialog.open()},handlePrint(){this.$refs.auxHiPrint.open("sales",this.ordersId)},submitPrint(e,t){this.pdfBuildProgress=0,this.pdfTemplate=t.template,this.printContentCom||this.initContentComponent(),this.$nextTick(()=>{this.printContentCom().then(()=>{this.$nextTick(()=>{this.$refs.printContentCom.init().then(()=>{"setting"==e?this.$refs.printContainer.openControls(t):this.$refs.printContainer.generatePdf(e,t)})})})})}}},be=ye,ve=Object(u["a"])(be,n,o,!1,null,null,null);t["default"]=ve.exports}}]);