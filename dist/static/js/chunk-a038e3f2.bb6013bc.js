(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a038e3f2"],{3562:function(a,t,e){"use strict";e.r(t);var l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"min-container"},[e("el-form",{ref:"elForm",attrs:{model:a.formData,rules:a.rules,"label-width":"110px"}},[e("div",{staticClass:"aux-card"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("基础信息")])]),e("div",{staticClass:"right"},[e("el-button",{on:{click:a.resetForm}},[a._v("重置")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-save"},on:{click:a.submitForm}},[a._v("保存信息")])],1)]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"客户名称",prop:"name"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写客户名称",maxlength:"64",clearable:""},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"客户编码",prop:"code"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写客户编码",clearable:""},model:{value:a.formData.code,callback:function(t){a.$set(a.formData,"code",t)},expression:"formData.code"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"所属区域",prop:"area"}},[e("AuxAreaPicker",{on:{change:a.changePickerArea},model:{value:a.formData.area_ids,callback:function(t){a.$set(a.formData,"area_ids",t)},expression:"formData.area_ids"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"关联业务员",prop:"sale_manid"}},[e("AuxMemberSelect",{attrs:{placeholder:"默认关联业务员"},model:{value:a.formData.sale_mid,callback:function(t){a.$set(a.formData,"sale_mid",t)},expression:"formData.sale_mid"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"启用状态",prop:"state"}},[e("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择启用状态",clearable:""},model:{value:a.formData.state,callback:function(t){a.$set(a.formData,"state",t)},expression:"formData.state"}},[e("el-option",{attrs:{label:"启用",value:1}}),e("el-option",{attrs:{label:"停用",value:2}})],1)],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"备注信息",prop:"remark"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写备注信息",maxlength:"100",clearable:""},model:{value:a.formData.remark,callback:function(t){a.$set(a.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)]),e("div",{staticClass:"aux-card margin-top"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("售价信息")])])]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"售价等级",prop:"sale_grade"}},[e("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择售价等级",clearable:""},model:{value:a.formData.sale_grade,callback:function(t){a.$set(a.formData,"sale_grade",t)},expression:"formData.sale_grade"}},a._l(a.saleGradeList,(function(a,t){return e("el-option",{key:t,attrs:{label:a.name,value:a.value}})})),1)],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"信用额度",prop:"max_debt_amount"}},[e("el-input",{style:{width:"100%"},attrs:{oninput:"value=value.match(/^\\d+(?:\\.\\d{0,2})?/)",placeholder:"请填写信用额度",clearable:""},model:{value:a.formData.max_debt_amount,callback:function(t){a.$set(a.formData,"max_debt_amount",a._n(t))},expression:"formData.max_debt_amount"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}})],1)]),e("div",{staticClass:"aux-card margin-top"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("span",{staticClass:"title"},[a._v("联系信息")])])]),e("div",{staticClass:"padding",staticStyle:{width:"96%"}},[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"联系人",prop:"contact"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写联系人",maxlength:"16",clearable:""},model:{value:a.formData.contact,callback:function(t){a.$set(a.formData,"contact",t)},expression:"formData.contact"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"联系电话",prop:"telephone"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写联系电话",maxlength:"16",clearable:""},model:{value:a.formData.telephone,callback:function(t){a.$set(a.formData,"telephone",t)},expression:"formData.telephone"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"详细地址",prop:"address"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写详细地址",maxlength:"128",clearable:""},model:{value:a.formData.address,callback:function(t){a.$set(a.formData,"address",t)},expression:"formData.address"}})],1)],1),e("el-divider",{attrs:{"content-position":"center"}},[e("span",{on:{click:function(t){a.moreSet=!0}}},[a._v("更多设置")])]),a.moreSet?e("div",[e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"QQ号",prop:"qq"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写QQ号",maxlength:"12",clearable:""},model:{value:a.formData.qq,callback:function(t){a.$set(a.formData,"qq",t)},expression:"formData.qq"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"微信号",prop:"weixin"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写微信号",maxlength:"32",clearable:""},model:{value:a.formData.weixin,callback:function(t){a.$set(a.formData,"weixin",t)},expression:"formData.weixin"}})],1)],1),e("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},[e("el-form-item",{staticClass:"flex1",attrs:{label:"邮箱",prop:"email"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写邮箱",maxlength:"32",clearable:""},model:{value:a.formData.email,callback:function(t){a.$set(a.formData,"email",t)},expression:"formData.email"}})],1),e("el-form-item",{staticClass:"flex1",attrs:{label:"邮编",prop:" postal"}},[e("el-input",{style:{width:"100%"},attrs:{placeholder:"请填写邮编",maxlength:"8",clearable:""},model:{value:a.formData.postal,callback:function(t){a.$set(a.formData,"postal",t)},expression:"formData.postal"}})],1)],1)],1):a._e()],1)])])],1)},s=[],r=(e("a15b"),e("b680"),e("d81d"),e("b0c0"),e("2197")),o=e("f63d"),i=e("b866"),n={name:"StoreCreate",components:{AuxAreaPicker:o["a"],AuxMemberSelect:i["a"]},data:function(){return{moreSet:!1,storeId:"",saleGradeList:this.$constant.SALE_GRADE_LIST,formData:{name:"",code:"",area_id:"",area_ids:[],area_name:[],sale_mid:"",state:1,remark:"",sale_grade:0,max_debt_amount:"",contact:"",telephone:"",address:"",location:"",qq:"",weixin:"",email:"",postal:""},rules:{name:[{required:!0,message:"请填写客户名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],code:[],area:[],sale_mid:[],state:[],remark:[],contact:[{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"}]}}},watch:{},created:function(){var a=this.$route.query.id;a&&(this.storeId=a,this.fetchStoreInfo())},mounted:function(){},methods:{fetchStoreInfo:function(){var a=this;Object(r["a"])("store/getStore",{storeId:this.storeId},{functionName:"xunda"}).then((function(t){var e=t.data,l=e.max_debt_amount,s=e.area_name,r=e.area_ids,o=void 0===r?[]:r,i=e.area_names,n=void 0===i?[]:i;console.log(o),a.formData=Object.assign(a.formData,t.data),a.formData.area_name=s||n.join(" / "),l&&(a.formData.max_debt_amount=(l/100).toFixed(2))}))},changePickerArea:function(a){this.formData.area_name=a.map((function(a){return a.name})).join(" / "),this.formData.area_id=this.formData.area_ids[this.formData.area_ids.length-1]},submitForm:function(){var a=this;this.$refs["elForm"].validate((function(t){t&&Object(r["a"])("store/saveStore",a.getPostData(),{functionName:"xunda"}).then((function(t){a.$message.success("保存成功"),setTimeout((function(){a.$common.closePage()}),300)}))}))},getPostData:function(){var a=this.formData;return Object.assign({},a,{max_debt_amount:this.$common.yuan2cent(a.max_debt_amount),location:""})},resetForm:function(){this.$refs["elForm"].resetFields()}}},c=n,m=(e("dca0"),e("2877")),f=Object(m["a"])(c,l,s,!1,null,"0493dc22",null);t["default"]=f.exports},"4e92":function(a,t,e){},dca0:function(a,t,e){"use strict";e("4e92")}}]);