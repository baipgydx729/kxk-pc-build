(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b8590e4"],{4050:function(t,e,a){"use strict";a("b9f6")},"4f47":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"aux-card"},[t._m(0),a("div",{staticClass:"filter-container margin-top-sm"},[a("el-form",{ref:"baseForm",attrs:{"label-width":"100px","label-align":"right"}},[a("div",{staticClass:"dflex-b padding-lr"},[a("div",{staticClass:"dflex-s flex1"},[a("el-select",{staticStyle:{width:"120px"},attrs:{clear:!1},model:{value:t.reqData.direction,callback:function(e){t.$set(t.reqData,"direction",e)},expression:"reqData.direction"}},t._l(t.filterStates,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1),a("el-date-picker",{staticClass:"margin-left-sm",staticStyle:{width:"300px"},attrs:{type:"daterange","range-separator":" - ","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.reqData.dateRange,callback:function(e){t.$set(t.reqData,"dateRange",e)},expression:"reqData.dateRange"}}),a("el-input",{staticClass:"margin-left-sm",staticStyle:{width:"300px"},attrs:{placeholder:"请输入单号搜索"},on:{confirm:t.fetchDataList},model:{value:t.reqData.ordersNo,callback:function(e){t.$set(t.reqData,"ordersNo",e)},expression:"reqData.ordersNo"}}),a("el-button",{staticClass:"margin-left-sm",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查 询")])],1),a("div",{staticStyle:{"text-align":"right"}})])])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}],staticClass:"aux-table",attrs:{data:t.dataList,border:"",fit:"",stripe:""}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:""}}),a("el-table-column",{attrs:{width:"200",align:"left",label:"库存单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"stock-orders-detail/"+e.row._id}},[a("span",{staticClass:"link-hover"},[t._v(t._s(e.row.opt_no))])])]}}])}),a("el-table-column",{attrs:{width:"180",align:"left",label:"开单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.opt_time)))]}}])}),a("el-table-column",{attrs:{width:"180",align:"center",label:"变动类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTypeName")(e.row.opt_type,t.$constant.STOCK_OPT_TYPES))+" "),e.row.rel_extend?a("div",{staticClass:"fs-xs ft-grey"},[a("i",{staticClass:"el-icon-location"}),t._v(" "+t._s(e.row.rel_extend.name)+" ")]):t._e()]}}])}),a("el-table-column",{attrs:{width:"180",align:"center",label:"所属仓库"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.warehouse_name))]}}])}),a("el-table-column",{attrs:{width:"160",align:"center",label:"变更商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("x"+t._s(e.row.orders_goods.length))]}}])}),a("el-table-column",{attrs:{width:"160",align:"right",label:"商品金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("cent2yuan")(e.row.total_price)))]}}])}),a("el-table-column",{attrs:{width:"160",align:"center",label:"经办人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.create_uname))]}}])}),a("el-table-column",{attrs:{align:"left",label:"备注","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.remark))]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.$common.toPage("./stock-orders-detail/"+e.row._id)}}},[t._v("详情")])]}}])})],1),a("div",{staticClass:"padding-sm dflex-c"},[a("el-pagination",{attrs:{background:"","page-size":t.pagination.pageSize,total:t.pagination.totalCount,"current-page":t.pagination.pageNo,"page-sizes":[10,15,20,30,50],layout:"total, prev, pager, next, sizes","hide-on-single-page":""},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[a("span",{staticClass:"title"},[t._v("库存变动")])]),a("div",{staticClass:"right"})])}],s=a("e177"),l=a.n(s),o=a("2197"),r={components:{},data(){return{permission:"stock-stream",filterStates:[{name:"全 部",value:""},{name:"入库单",value:1},{name:"出库单",value:-1}],settleState:[{name:"未付款",value:0},{name:"部分付款",value:1},{name:"已付款",value:9}],dataLoading:!1,dataList:[],pagination:{totalCount:1,pageSize:12,pageNo:1},reqData:{direction:"",pageNo:1,pageSize:8,orderBy:"opt_time",sord:"desc"}}},mounted(){this.fetchDataList()},methods:{fetchDataList(){this.dataLoading=!0;const t=Object.assign({needDetail:!1,isPaging:!0},this.getReqData(),this.pagination);Object(o["a"])("stock/listStockStream",t,{functionName:"xunda"}).then(t=>{this.dataList=t.data||[],1===this.pagination.pageNo&&(this.pagination.totalCount=t.totalCount),this.dataLoading=!1})},getReqData(){const t=Object.assign({},this.reqData),e=this.reqData.dateRange||[];return e.length>0&&(t.startDay=l()(e[0]).valueOf(),t.endDay=l()(e[1]).valueOf()),t},handleSearch(t){this.fetchDataList()},handleTabSelect(t){this.reqData.state=t,this.pagination.pageNo=1,this.fetchDataList()},changePageNo(t){this.pagination.pageNo=t,this.fetchDataList()},changePageSize(t){this.pagination.pageNo=1,this.pagination.pageSize=t,this.fetchDataList()}}},c=r,d=(a("4050"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,null,null);e["default"]=u.exports},b9f6:function(t,e,a){}}]);